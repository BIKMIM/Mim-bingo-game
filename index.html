<!DOCTYPE html>

<html lang="ko">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>ë°ˆì£¼ë¨¸ë‹ˆ ë¹™ê³  ê²Œì„</title>

Â  Â  <style>

Â  Â  Â  Â  /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” */

Â  Â  Â  Â  * {

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  padding: 0;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì „ì²´ í˜ì´ì§€ ë°°ê²½ ë° í°íŠ¸ */

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;

Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

Â  Â  Â  Â  Â  Â  min-height: 100vh;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */

Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  max-width: 1200px;

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.3);

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* í—¤ë” */

Â  Â  Â  Â  .header {

Â  Â  Â  Â  Â  Â  background: #4a5568;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ê²Œì„ ì„¤ì • ì„¹ì…˜ */

Â  Â  Â  Â  .game-setup {

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #e2e8f0;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë°© ê´€ë ¨ ì„¹ì…˜ */

Â  Â  Â  Â  .room-section {

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì…ë ¥ ê·¸ë£¹ (ë¼ë²¨ + ì¸í’‹) */

Â  Â  Â  Â  .input-group {

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .input-group label {

Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  Â  Â  margin-bottom: 5px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  color: #4a5568;

Â  Â  Â  Â  }



Â  Â  Â  Â  .input-group input, .input-group select {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  border: 2px solid #e2e8f0;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .input-group input:focus, .input-group select:focus {

Â  Â  Â  Â  Â  Â  outline: none;

Â  Â  Â  Â  Â  Â  border-color: #667eea;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë²„íŠ¼ ê·¸ë£¹ */

Â  Â  Â  Â  .button-group {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  flex-wrap: wrap;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì¼ë°˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */

Â  Â  Â  Â  .btn {

Â  Â  Â  Â  Â  Â  padding: 12px 24px;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  transition: all 0.3s;

Â  Â  Â  Â  }



Â  Â  Â  Â  .btn-primary {

Â  Â  Â  Â  Â  Â  background: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }



Â  Â  Â  Â  .btn-primary:hover {

Â  Â  Â  Â  Â  Â  background: #5a67d8;

Â  Â  Â  Â  }



Â  Â  Â  Â  .btn-secondary {

Â  Â  Â  Â  Â  Â  background: #e2e8f0;

Â  Â  Â  Â  Â  Â  color: #4a5568;

Â  Â  Â  Â  }



Â  Â  Â  Â  .btn-secondary:hover {

Â  Â  Â  Â  Â  Â  background: #cbd5e0;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* í”Œë ˆì´ì–´ ëª©ë¡ ì„¹ì…˜ */

Â  Â  Â  Â  .players-section {

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .players-list {

Â  Â  Â  Â  Â  Â  background: #f7fafc;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  margin-top: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .player-item {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 10px 15px;

Â  Â  Â  Â  Â  Â  margin: 5px 0;

Â  Â  Â  Â  Â  Â  border-radius: 6px;

Â  Â  Â  Â  Â  Â  border-left: 4px solid #667eea;

Â  Â  Â  Â  }



Â  Â  Â  Â  .player-item.host {

Â  Â  Â  Â  Â  Â  border-left-color: #f56565;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë¯¸ì…˜ ì„¹ì…˜ */

Â  Â  Â  Â  .missions-section {

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .mission-input-area {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .mission-input {

Â  Â  Â  Â  Â  Â  flex: 1;

Â  Â  Â  Â  }



Â  Â  Â  Â  .missions-list {

Â  Â  Â  Â  Â  Â  background: #f7fafc;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  max-height: 200px;

Â  Â  Â  Â  Â  Â  overflow-y: auto;

Â  Â  Â  Â  }



Â  Â  Â  Â  .mission-item {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 10px 15px;

Â  Â  Â  Â  Â  Â  margin: 5px 0;

Â  Â  Â  Â  Â  Â  border-radius: 6px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: space-between;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  }



Â  Â  Â  Â  .delete-btn {

Â  Â  Â  Â  Â  Â  background: #e53e3e;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 4px;

Â  Â  Â  Â  Â  Â  padding: 5px 10px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ê²Œì„ ì˜µì…˜ ì„¹ì…˜ */

Â  Â  Â  Â  .game-options {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 20px;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  Â  Â  flex-wrap: wrap;

Â  Â  Â  Â  }



Â  Â  Â  Â  .radio-group {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .radio-item {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 5px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ê²Œì„ ì§„í–‰ í™”ë©´ */

Â  Â  Â  Â  .game-area {

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë¹™ê³ íŒ */

Â  Â  Â  Â  .bingo-board {

Â  Â  Â  Â  Â  Â  display: grid;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  max-width: 500px;

Â  Â  Â  Â  Â  Â  margin: 0 auto 30px auto;

Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr); /* 3x3ìœ¼ë¡œ ê³ ì • */

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë¹™ê³  ì…€ */

Â  Â  Â  Â  .bingo-cell {

Â  Â  Â  Â  Â  Â  aspect-ratio: 1; /* ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ 1:1 ìœ ì§€ */

Â  Â  Â  Â  Â  Â  background: #e2e8f0;

Â  Â  Â  Â  Â  Â  border: 2px solid #cbd5e0;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  font-size: 20px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  transition: all 0.3s;

Â  Â  Â  Â  Â  Â  color: #4a5568;

Â  Â  Â  Â  Â  Â  word-break: keep-all;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  padding: 5px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .bingo-cell:hover {

Â  Â  Â  Â  Â  Â  background: #cbd5e0;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Flipped (ì²´í¬ë¨) ìƒíƒœ */

Â  Â  Â  Â  .bingo-cell.flipped {

Â  Â  Â  Â  Â  Â  background: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Failed (ì‹¤íŒ¨) ìƒíƒœ */

Â  Â  Â  Â  .bingo-cell.failed {

Â  Â  Â  Â  Â  Â  background: #f56565;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  text-decoration: line-through;

Â  Â  Â  Â  Â  Â  opacity: 0.7;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ê²Œì„ ìƒíƒœ í‘œì‹œ */

Â  Â  Â  Â  .game-status {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .status-text {

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  color: #4a5568;

Â  Â  Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .room-code-display {

Â  Â  Â  Â  Â  Â  background: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 10px 20px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  font-size: 20px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  display: inline-block;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ìˆ¨ê¹€ ì²˜ë¦¬ */

Â  Â  Â  Â  .hidden {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë¡œë”© ë©”ì‹œì§€ */

Â  Â  Â  Â  .loading {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  color: #667eea;

Â  Â  Â  Â  Â  Â  font-style: italic;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì˜¤ë¥˜ ë©”ì‹œì§€ */

Â  Â  Â  Â  .error {

Â  Â  Â  Â  Â  Â  background: #fed7d7;

Â  Â  Â  Â  Â  Â  color: #c53030;

Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  border-radius: 6px;

Â  Â  Â  Â  Â  Â  margin: 10px 0;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì„±ê³µ ë©”ì‹œì§€ */

Â  Â  Â  Â  .success {

Â  Â  Â  Â  Â  Â  background: #c6f6d5;

Â  Â  Â  Â  Â  Â  color: #2f855a;

Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  border-radius: 6px;

Â  Â  Â  Â  Â  Â  margin: 10px 0;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Bingo Button ë° í„´ ì¢…ë£Œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */

Â  Â  Â  Â  #bingo-button, #turn-end-button {

Â  Â  Â  Â  Â  Â  background-color: #4CAF50;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 15px 30px;

Â  Â  Â  Â  Â  Â  font-size: 24px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  transition: background-color 0.3s ease, transform 0.1s ease;

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  Â  Â  display: block; /* í•­ìƒ ë³´ì´ë„ë¡ ì„¤ì • */

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  max-width: 300px;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }

Â  Â  Â  Â  #turn-end-button {

Â  Â  Â  Â  Â  Â  background-color: #008CBA;

Â  Â  Â  Â  Â  Â  margin-top: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  #bingo-button:hover:not(:disabled), #turn-end-button:hover:not(:disabled) {

Â  Â  Â  Â  Â  Â  background-color: #45a049;

Â  Â  Â  Â  Â  Â  transform: scale(1.05);

Â  Â  Â  Â  }

Â  Â  Â  Â  #turn-end-button:hover:not(:disabled) {

Â  Â  Â  Â  Â  Â  background-color: #007bb5;

Â  Â  Â  Â  }



Â  Â  Â  Â  #bingo-button:disabled, #turn-end-button:disabled {

Â  Â  Â  Â  Â  Â  background-color: #ccc;

Â  Â  Â  Â  Â  Â  cursor: not-allowed;

Â  Â  Â  Â  Â  Â  opacity: 0.7;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */

Â  Â  Â  Â  .game-buttons {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ íŒì—…ìš© ì˜¤ë²„ë ˆì´ */

Â  Â  Â  Â  .password-overlay {

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  top: 0;

Â  Â  Â  Â  Â  Â  left: 0;

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  height: 100%;

Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.7);

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  z-index: 2000; /* ìŠ¹ë¦¬ ì˜¤ë²„ë ˆì´ë³´ë‹¤ ë†’ê²Œ ì„¤ì • */

Â  Â  Â  Â  }



Â  Â  Â  Â  .password-prompt {

Â  Â  Â  Â  Â  Â  background-color: white;

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0,0,0,0.3);

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  width: 90%;

Â  Â  Â  Â  Â  Â  max-width: 400px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .password-prompt h3 {

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  color: #4a5568;

Â  Â  Â  Â  }



Â  Â  Â  Â  .password-prompt input {

Â  Â  Â  Â  Â  Â  width: calc(100% - 24px); /* íŒ¨ë”© ê³ ë ¤ */

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  Â  Â  border: 1px solid #e2e8f0;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .password-prompt button {

Â  Â  Â  Â  Â  Â  padding: 10px 20px;

Â  Â  Â  Â  Â  Â  background-color: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  margin: 0 5px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .password-prompt button:hover {

Â  Â  Â  Â  Â  Â  background-color: #5a67d8;

Â  Â  Â  Â  }





Â  Â  Â  Â  /* ìŠ¹ë¦¬ ë©”ì‹œì§€ ì˜¤ë²„ë ˆì´ */

Â  Â  Â  Â  .winner-overlay {

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  top: 0;

Â  Â  Â  Â  Â  Â  left: 0;

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  height: 100%;

Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.7); /* ë°˜íˆ¬ëª… ê²€ì • ë°°ê²½ */

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  z-index: 1000;

Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease-out;

Â  Â  Â  Â  }



Â  Â  Â  Â  .winner-message {

Â  Â  Â  Â  Â  Â  background-color: white; /* íŒì—… ë°°ê²½ìƒ‰ í°ìƒ‰ */

Â  Â  Â  Â  Â  Â  color: #4a5568; /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */

Â  Â  Â  Â  Â  Â  font-size: 3em;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  padding: 40px;

Â  Â  Â  Â  Â  Â  border-radius: 20px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);

Â  Â  Â  Â  Â  Â  animation: zoomIn 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;

Â  Â  Â  Â  Â  Â  position: relative;

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* í…ìŠ¤íŠ¸ì—ë§Œ ê·¸ë¼ë°ì´ì…˜ ì ìš© */

Â  Â  Â  Â  .gradient-text {

Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, #f3ec78, #af4261);

Â  Â  Â  Â  Â  Â  -webkit-background-clip: text;

Â  Â  Â  Â  Â  Â  -webkit-text-fill-color: transparent;

Â  Â  Â  Â  Â  Â  background-clip: text;

Â  Â  Â  Â  Â  Â  color: transparent; /* Fallback for browsers not supporting text-fill-color */

Â  Â  Â  Â  }



Â  Â  Â  Â  .winner-message .emoji {

Â  Â  Â  Â  Â  Â  font-size: 1.5em;

Â  Â  Â  Â  Â  Â  -webkit-text-fill-color: initial;

Â  Â  Â  Â  Â  Â  background: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  .winner-message .winner-text {

Â  Â  Â  Â  Â  Â  font-size: 1em;

Â  Â  Â  Â  Â  Â  line-height: 1.3;

Â  Â  Â  Â  }



Â  Â  Â  Â  .winner-message .btn {

Â  Â  Â  Â  Â  Â  background-color: #667eea;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  padding: 10px 20px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 0.6em;

Â  Â  Â  Â  Â  Â  transition: background-color 0.3s;

Â  Â  Â  Â  }



Â  Â  Â  Â  .winner-message .btn:hover {

Â  Â  Â  Â  Â  Â  background-color: #5a67d8;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ */

Â  Â  Â  Â  @keyframes fadeIn {

Â  Â  Â  Â  Â  Â  from { opacity: 0; }

Â  Â  Â  Â  Â  Â  to { opacity: 1; }

Â  Â  Â  Â  }



Â  Â  Â  Â  @keyframes zoomIn {

Â  Â  Â  Â  Â  Â  from { transform: scale(0.5); opacity: 0; }

Â  Â  Â  Â  Â  Â  to { transform: scale(1); opacity: 1; }

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë°˜ì‘í˜• ë””ìì¸ */

Â  Â  Â  Â  @media (max-width: 768px) {

Â  Â  Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  Â  Â  margin: 10px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  .button-group {

Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  .game-options {

Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  Â  Â  align-items: flex-start;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  .winner-message {

Â  Â  Â  Â  Â  Â  Â  Â  font-size: 2em;

Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ìƒˆë¡œìš´ flex ì»¨í…Œì´ë„ˆë¥¼ ìœ„í•œ ìŠ¤íƒ€ì¼ */

Â  Â  Â  Â  .create-room-controls {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  flex-wrap: wrap;

Â  Â  Â  Â  Â  Â  align-items: flex-end; /* ë²„íŠ¼ê³¼ ë“œë¡­ë‹¤ìš´ì´ ë°”ë‹¥ì„ ì— ì •ë ¬ë˜ë„ë¡ */

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  margin-top: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .create-room-controls .input-group {

Â  Â  Â  Â  Â  Â  margin-bottom: 0; /* ì´ ê·¸ë£¹ ë‚´ë¶€ì˜ input-groupì€ ë§ˆì§„ ì œê±° */

Â  Â  Â  Â  }



Â  Â  Â  Â  /* max-players select boxì˜ ë„ˆë¹„ë¥¼ ì¡°ì •í•˜ì—¬ ë²„íŠ¼ê³¼ ì˜ ì–´ìš¸ë¦¬ê²Œ */

Â  Â  Â  Â  .create-room-controls #max-players-create {

Â  Â  Â  Â  Â  Â  width: auto; /* ìë™ ë„ˆë¹„ */

Â  Â  Â  Â  Â  Â  min-width: 100px; /* ìµœì†Œ ë„ˆë¹„ ì„¤ì • */

Â  Â  Â  Â  Â  Â  flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ì±„ìš°ë„ë¡ ì„±ì¥ */

Â  Â  Â  Â  }



Â  Â  Â  Â  /* 'ìƒˆ ë°© ë§Œë“¤ê¸°' ë²„íŠ¼ í¬ê¸° í‚¤ìš°ê¸° */

Â  Â  Â  Â  .create-room-controls #create-room-btn {

Â  Â  Â  Â  Â  Â  padding: 15px 30px; /* íŒ¨ë”©ì„ ëŠ˜ë ¤ í¬ê¸° í‚¤ì›€ */

Â  Â  Â  Â  Â  Â  font-size: 18px; /* ê¸€ì í¬ê¸° í‚¤ì›€ */

Â  Â  Â  Â  Â  Â  flex-shrink: 0; /* ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ë°© ì…ì¥í•˜ê¸° ë²„íŠ¼ ìˆ¨ê¹€ì„ ìœ„í•œ í´ë˜ìŠ¤ ì¶”ê°€ (ì´ˆëŒ€ë§í¬ ì‹œ) */

Â  Â  Â  Â  .hidden-by-url-param {

Â  Â  Â  Â  Â  Â  display: none !important; /* ìš°ì„ ìˆœìœ„ ë†’ì„ */

Â  Â  Â  Â  }



Â  Â  Â  Â  /* ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ ë“œë¡­ë‹¤ìš´ì˜ labelê³¼ selectê°€ ê°€ë¡œë¡œ ë‚˜ë€íˆ ì˜¤ë„ë¡ */

Â  Â  Â  Â  .input-group.inline-label {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  flex-grow: 1;

Â  Â  Â  Â  }



Â  Â  Â  Â  .input-group.inline-label label {

Â  Â  Â  Â  Â  Â  margin-bottom: 0;

Â  Â  Â  Â  Â  Â  flex-shrink: 0; /* ë¼ë²¨ì´ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */

Â  Â  Â  Â  }

Â  Â  Â  Â  .input-group.inline-label select {

Â  Â  Â  Â  Â  Â  width: auto; /* selectê°€ ìë™ìœ¼ë¡œ ë„ˆë¹„ ì¡°ì • */

Â  Â  Â  Â  Â  Â  flex-grow: 1; /* ë‚¨ì€ ê³µê°„ ì±„ìš°ê¸° */

Â  Â  Â  Â  }



Â  Â  </style>

</head>

<body>

Â  Â  <div class="container">

Â  Â  Â  Â  <div class="header">

Â  Â  Â  Â  Â  Â  <h1>ğŸ¯ ë°ˆì£¼ë¨¸ë‹ˆ ë¹™ê³  ê²Œì„!</h1>

Â  Â  Â  Â  Â  Â  <p>ë°ˆì£¼ë¨¸ë‹ˆì™€ í•¨ê»˜ ì¦ê¸°ëŠ” ìê¸° ë¹™ê³ !</p>

Â  Â  Â  Â  Â  Â  <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">

Â  Â  Â  Â  Â  Â  Â  Â  v4.7 - ë¯¸ì…˜ ì„¸ì´ë¸Œ/ë¡œë“œ ì‹œìŠ¤í…œ ì¶”ê°€

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="game-setup" class="game-setup">

Â  Â  Â  Â  Â  Â  <div class="room-section">

Â  Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ  ë°© ì„¤ì •</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="player-name">í”Œë ˆì´ì–´ ì´ë¦„</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="player-name" placeholder="ë‹¹ì‹ ì˜ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="10">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div class="create-room-controls">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group inline-label" id="max-players-create-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="max-players-create">ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="max-players-create">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">2ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">3ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="4">4ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="5">5ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="6">6ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="7">7ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="8">8ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="9">9ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="10">10ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="11">11ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="12">12ëª…</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" id="create-room-btn" onclick="createRoom()">ìƒˆ ë°© ë§Œë“¤ê¸°</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group" id="main-action-buttons" style="margin-top: 15px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" id="show-join-room-btn" onclick="showJoinRoom()">ë°© ì…ì¥í•˜ê¸°</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  Â  Â  <div id="join-room-section" class="hidden" style="margin-top: 15px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="room-code">ë°© ì½”ë“œ</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="room-code" placeholder="ë°© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”" maxlength="8">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="joinRoom()">ë°© ì…ì¥</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="auto-join-hint" class="hidden" style="color: #667eea; font-size: 14px; margin-top: 10px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ’¡ íŒ: ì´ë¦„ ì…ë ¥ í›„ Enterí‚¤ë¥¼ ëˆ„ë¥´ë©´ ë°”ë¡œ ì…ì¥ë©ë‹ˆë‹¤!

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  Â  Â  <div id="status-message"></div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div id="share-section" class="hidden" style="margin-top: 20px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="background: #f7fafc; padding: 15px; border-radius: 8px; border: 2px solid #667eea;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="color: #4a5568; margin-bottom: 10px;">ğŸ”— ì¹œêµ¬ ì´ˆëŒ€ ë§í¬</h4>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 10px; align-items: center;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="share-link" readonly style="flex: 1; background: white; border: 1px solid #e2e8f0; padding: 8px; border-radius: 4px; font-size: 14px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="copyShareLink()" style="padding: 8px 16px;">ë³µì‚¬</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color: #718096; font-size: 12px; margin-top: 8px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ì´ ë§í¬ë¥¼ ì¹œêµ¬ë“¤ì—ê²Œ ë³´ë‚´ë©´ ë°”ë¡œ ë°©ì— ì…ì¥í•  ìˆ˜ ìˆì–´ìš”!

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div class="players-section">

Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ‘¥ ì°¸ê°€ì ëª©ë¡</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="players-list" id="players-list">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="loading">ë°©ì— ì…ì¥í•˜ë©´ ì°¸ê°€ìê°€ í‘œì‹œë©ë‹ˆë‹¤</div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div class="missions-section">

Â  Â  Â  Â  Â  Â  Â  Â  <h3>ğŸ“ ë¯¸ì…˜ í…ìŠ¤íŠ¸</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="mission-input-area">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="mission-input" id="mission-input" placeholder="ë¯¸ì…˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="20">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="addMission()">ì¶”ê°€</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group" style="margin-bottom: 15px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="saveMissions()">ë¯¸ì…˜ ì €ì¥</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="loadMissions()">ë¯¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ë³¸ê°’)</button>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="missions-list" id="missions-list">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="current-mission-count" style="text-align: center; margin-top: 10px; font-size: 14px; color: #718096;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  í˜„ì¬ ë“±ë¡ëœ ë¯¸ì…˜: 0ê°œ

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div class="game-options" id="game-options-section">

Â  Â  Â  Â  Â  Â  Â  Â  <div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label><strong>ë¹™ê³ íŒ í¬ê¸°:</strong></label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-item">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="board-size" value="3" id="size-3" checked disabled> <label for="size-3">3x3</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label><strong>ìŠ¹ë¦¬ ì¡°ê±´:</strong></label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-item">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="win-condition" value="1" id="win-1" checked>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="win-1">1ì¤„ ë¹™ê³ </label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-item">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="win-condition" value="2" id="win-2">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="win-2">2ì¤„ ë¹™ê³ </label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-item">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" name="win-condition" value="3" id="win-3">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="win-3">3ì¤„ ë¹™ê³ </label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <div id="first-player-section" class="hidden" style="margin-top: 20px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label><strong>ì„ ê³µ í”Œë ˆì´ì–´:</strong></label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="first-player-select" style="margin-left: 10px; padding: 8px; border-radius: 4px; border: 1px solid #e2e8f0;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">ì„ ê³µì„ ì„ íƒí•˜ì„¸ìš”</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div style="text-align: center;">

Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" id="start-game-btn" onclick="startGame()" style="font-size: 18px; padding: 15px 30px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ® ê²Œì„ ì‹œì‘!

Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="game-area" class="game-area">

Â  Â  Â  Â  Â  Â  <div class="game-status">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="status-text">ë°© ì½”ë“œ: <span class="room-code-display" id="current-room-code">ABC123">ABC123</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="status-text">í˜„ì¬ ì°¨ë¡€: <strong id="current-turn">ë‹¹ì‹ </strong></div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="status-text">ê³µí†µ ë¯¸ì…˜ ìˆ˜í–‰ ìˆ«ì: <strong id="flipped-numbers-count">0</strong></div> </div>



Â  Â  Â  Â  Â  Â  <div class="bingo-board" id="bingo-board">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <div class="game-buttons">

Â  Â  Â  Â  Â  Â  Â  Â  <button id="bingo-button" class="btn btn-primary" onclick="claimBingo()" disabled>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ‰ ë¹™ê³ !

Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="turn-end-button" class="btn btn-secondary" onclick="turnEnd()" disabled>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â¡ï¸ í„´ ì¢…ë£Œ

Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div style="text-align: center; margin-top: 20px;">

Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="backToSetup()">ê²Œì„ ì„¤ì •ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>

Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>



Â  Â  <script>

Â  Â  Â  Â  // Firebase ì„¤ì •

Â  Â  Â  Â  const firebaseConfig = {

Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyAqHKfUCypD_Jk7mXgH5u-OTXS7Dje4DZ8",

Â  Â  Â  Â  Â  Â  authDomain: "mim-bingo-game.firebaseapp.com",

Â  Â  Â  Â  Â  Â  databaseURL: "https://mim-bingo-game-default-rtdb.asia-southeast1.firebasedatabase.app",

Â  Â  Â  Â  Â  Â  projectId: "mim-bingo-game",

Â  Â  Â  Â  Â  Â  storageBucket: "mim-bingo-game.firebasestorage.app",

Â  Â  Â  Â  Â  Â  messagingSenderId: "436254307510",

Â  Â  Â  Â  Â  Â  appId: "1:436254307510:web:23ad7c9a0d10d8ad26217"

Â  Â  Â  Â  };



Â  Â  Â  Â  // Firebase ì´ˆê¸°í™”

Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);

Â  Â  Â  Â  const database = firebase.database();



Â  Â  Â  Â  // ê¸°ë³¸ ë¯¸ì…˜ ëª©ë¡ (localStorageì— ì €ì¥ëœ ë¯¸ì…˜ì´ ì—†ì„ ê²½ìš° ì‚¬ìš©)

Â  Â  Â  Â  const defaultMissions = [

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜1",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜2",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜3",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜4",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜5",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜6",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜7",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜8",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜9",

Â  Â  Â  Â  Â  Â  "ë¯¸ì…˜10" // 10ê°œë¡œ ëŠ˜ë¦¼

Â  Â  Â  Â  ];



Â  Â  Â  Â  // ê²Œì„ ìƒíƒœ ë³€ìˆ˜ë“¤

Â  Â  Â  Â  let gameState = {

Â  Â  Â  Â  Â  Â  isHost: false,

Â  Â  Â  Â  Â  Â  roomCode: '',

Â  Â  Â  Â  Â  Â  playerName: '',

Â  Â  Â  Â  Â  Â  players: {}, // ëª¨ë“  í”Œë ˆì´ì–´ ì •ë³´ (ì´ë¦„, í˜¸ìŠ¤íŠ¸ ì—¬ë¶€, ì…ì¥ ì‹œê°„ ë“±)

Â  Â  Â  Â  Â  Â  missions: [], // ë°©ì¥ì´ ì„¤ì •í•œ ë¯¸ì…˜ ëª©ë¡

Â  Â  Â  Â  Â  Â  winCondition: 1,

Â  Â  Â  Â  Â  Â  boardSize: 3, // 3x3ìœ¼ë¡œ ê³ ì •

Â  Â  Â  Â  Â  Â  maxPlayers: 2,

Â  Â  Â  Â  Â  Â  gameStarted: false,

Â  Â  Â  Â  Â  Â  bingoBoard: [], // ê° í”Œë ˆì´ì–´ì˜ ë¡œì»¬ ë¹™ê³ íŒ ìƒíƒœ { number: 1, state: 'unflipped', mission: 'ë¯¸ì…˜1' }

Â  Â  Â  Â  Â  Â  currentTurn: 0, // í˜„ì¬ í„´ í”Œë ˆì´ì–´ì˜ playerList ì¸ë±ìŠ¤

Â  Â  Â  Â  Â  Â  playerList: [], // í”Œë ˆì´ì–´ ì´ë¦„ ë°°ì—´ (í„´ ìˆœì„œ)

Â  Â  Â  Â  Â  Â  roomRef: null, // í˜„ì¬ ì—°ê²°ëœ ë°©ì˜ Firebase ë ˆí¼ëŸ°ìŠ¤

Â  Â  Â  Â  Â  Â  missionMap: {}, // ìˆ«ì(1~9)ì™€ ë¯¸ì…˜ í…ìŠ¤íŠ¸ì˜ ê³ ì • ë§¤í•‘

Â  Â  Â  Â  Â  Â  canClaimBingo: false, // ë¹™ê³  ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€

Â  Â  Â  Â  Â  Â  flippedNumbers: [], // ëª¨ë“  í”Œë ˆì´ì–´ê°€ ê³µí†µìœ¼ë¡œ ë’¤ì§‘ì€ ìˆ«ì ëª©ë¡ (Firebaseì—ì„œ ë™ê¸°í™”)

Â  Â  Â  Â  Â  Â  hasMadeMoveInTurn: false // í˜„ì¬ í„´ì— ì…€ì„ í•œ ë²ˆì´ë¼ë„ í´ë¦­í–ˆëŠ”ì§€ ì—¬ë¶€

Â  Â  Â  Â  };



Â  Â  Â  Â  // í˜¸ìŠ¤íŠ¸ ì „ìš© ë¹„ë°€ë²ˆí˜¸ (í…ŒìŠ¤íŠ¸ìš©: 0804)

Â  Â  Â  Â  const HOST_PASSWORD = "0804";



Â  Â  Â  Â  // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ

Â  Â  Â  Â  function showMessage(message, type = 'info') {

Â  Â  Â  Â  Â  Â  const statusDiv = document.getElementById('status-message');

Â  Â  Â  Â  Â  Â  statusDiv.innerHTML = `<div class="${type}">${message}</div>`;

Â  Â  Â  Â  Â  Â  statusDiv.style.opacity = '1';

Â  Â  Â  Â  Â  Â  statusDiv.style.transition = 'opacity 0.5s ease-out'; // í˜ì´ë“œ ì•„ì›ƒ íš¨ê³¼

Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  statusDiv.style.opacity = '0';

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusDiv.innerHTML = '';

Â  Â  Â  Â  Â  Â  Â  Â  }, 500); // ì™„ì „íˆ ì‚¬ë¼ì§„ í›„ ë‚´ìš© ë¹„ìš°ê¸°

Â  Â  Â  Â  Â  Â  }, 3000); // 3ì´ˆ í›„ í˜ì´ë“œ ì•„ì›ƒ ì‹œì‘

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ íŒì—… ìƒì„± í•¨ìˆ˜

Â  Â  Â  Â  function createPasswordPrompt() {

Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {

Â  Â  Â  Â  Â  Â  Â  Â  const overlay = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  overlay.className = 'password-overlay';



Â  Â  Â  Â  Â  Â  Â  Â  const promptBox = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  promptBox.className = 'password-prompt';

Â  Â  Â  Â  Â  Â  Â  Â  promptBox.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>ë°©ì¥ì´ ë˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</h3>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="host-password-input" placeholder="ë¹„ë°€ë²ˆí˜¸">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="password-submit-btn">í™•ì¸</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="password-cancel-btn">ì·¨ì†Œ</button>

Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  overlay.appendChild(promptBox);

Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(overlay);



Â  Â  Â  Â  Â  Â  Â  Â  const passwordInput = document.getElementById('host-password-input');

Â  Â  Â  Â  Â  Â  Â  Â  const submitBtn = document.getElementById('password-submit-btn');

Â  Â  Â  Â  Â  Â  Â  Â  const cancelBtn = document.getElementById('password-cancel-btn');



Â  Â  Â  Â  Â  Â  Â  Â  const cleanup = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(overlay);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  submitBtn.removeEventListener('click', handleSubmit);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cancelBtn.removeEventListener('click', handleCancel);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.removeEventListener('keypress', handleKeyPress);

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  const handleSubmit = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const password = passwordInput.value;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cleanup();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(password);

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  const handleCancel = () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cleanup();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(null); // ì·¨ì†Œ ì‹œ null ë°˜í™˜

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  const handleKeyPress = (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  handleSubmit();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  submitBtn.addEventListener('click', handleSubmit);

Â  Â  Â  Â  Â  Â  Â  Â  cancelBtn.addEventListener('click', handleCancel);

Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.addEventListener('keypress', handleKeyPress);

Â  Â  Â  Â  Â  Â  Â  Â  passwordInput.focus(); // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }





Â  Â  Â  Â  // ë°© ìƒì„± (í˜¸ìŠ¤íŠ¸ ë¹„ë°€ë²ˆí˜¸ í•„ìš”)

Â  Â  Â  Â  async function createRoom() {

Â  Â  Â  Â  Â  Â  const playerName = document.getElementById('player-name').value.trim();

Â  Â  Â  Â  Â  Â  if (!playerName) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í”Œë ˆì´ì–´ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const password = await createPasswordPrompt();

Â  Â  Â  Â  Â  Â  if (password !== HOST_PASSWORD) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  gameState.isHost = true;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.playerName = playerName;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomCode = generateRoomCode();

Â  Â  Â  Â  Â  Â  Â  Â  // ìƒˆë¡œ ë°°ì¹˜ëœ ë“œë¡­ë‹¤ìš´ì—ì„œ ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ ê°€ì ¸ì˜´

Â  Â  Â  Â  Â  Â  Â  Â  gameState.maxPlayers = parseInt(document.getElementById('max-players-create').value);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef = database.ref('rooms/' + gameState.roomCode);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.set({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  host: playerName,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  players: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  [playerName]: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: playerName,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isHost: true,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  joinedAt: Date.now(),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  boardState: {}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  missions: gameState.missions, // ë°© ìƒì„± ì‹œ í˜„ì¬ ë¡œë“œëœ ë¯¸ì…˜ ëª©ë¡ìœ¼ë¡œ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameStarted: false,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winCondition: 1,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  boardSize: gameState.boardSize, // 3ìœ¼ë¡œ ê³ ì •

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maxPlayers: gameState.maxPlayers,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdAt: Date.now(),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flippedNumbers: {}, // ê³µí†µ ë’¤ì§‘íŒ ìˆ«ì ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTurn: 0,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winner: null,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameEnded: false,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  missionMap: {},

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoClaimed: null

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  setupRoomListeners();

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  const shareLink = `${window.location.origin}${window.location.pathname}?room=${gameState.roomCode}`;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('share-link').value = shareLink;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('share-section').classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ë°© ì½”ë“œ: ${gameState.roomCode}`, 'success');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë°© ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë°© ì…ì¥ UI í‘œì‹œ

Â  Â  Â  Â  function showJoinRoom() {

Â  Â  Â  Â  Â  Â  document.getElementById('join-room-section').classList.remove('hidden');

Â  Â  Â  Â  Â  Â  // 'ìƒˆ ë°© ë§Œë“¤ê¸°' ê´€ë ¨ UI ìˆ¨ê¸°ê¸°

Â  Â  Â  Â  Â  Â  document.getElementById('create-room-btn').classList.add('hidden-by-url-param');

Â  Â  Â  Â  Â  Â  document.getElementById('max-players-create-group').classList.add('hidden-by-url-param');

Â  Â  Â  Â  Â  Â  document.getElementById('main-action-buttons').classList.add('hidden-by-url-param');

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë°© ì…ì¥ (ì´ˆëŒ€ ë§í¬ ìë™ ì…ì¥ì„ ìœ„í•´ prefilledRoomCode ì¸ì ì‚¬ìš©)

Â  Â  Â  Â  async function joinRoom(prefilledRoomCode = null) {

Â  Â  Â  Â  Â  Â  const playerName = document.getElementById('player-name').value.trim();

Â  Â  Â  Â  Â  Â  const roomCode = prefilledRoomCode || document.getElementById('room-code').value.trim().toUpperCase();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!playerName) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í”Œë ˆì´ì–´ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!roomCode) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë°© ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  gameState.isHost = false;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.playerName = playerName;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomCode = roomCode;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef = database.ref('rooms/' + roomCode);



Â  Â  Â  Â  Â  Â  Â  Â  const snapshot = await gameState.roomRef.once('value');

Â  Â  Â  Â  Â  Â  Â  Â  if (!snapshot.exists()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë°© ì½”ë“œì…ë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  const roomData = snapshot.val();

Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.gameStarted) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì´ë¯¸ ì‹œì‘ëœ ê²Œì„ì…ë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  const currentPlayersCount = Object.keys(roomData.players || {}).length;

Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.maxPlayers && currentPlayersCount >= roomData.maxPlayers) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`ì´ ë°©ì€ ìµœëŒ€ ${roomData.maxPlayers}ëª…ê¹Œì§€ ì°¸ì—¬ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ ì¸ì›: ${currentPlayersCount}ëª…`, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.players && roomData.players[playerName]) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë¦„ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì„ íƒí•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // í”Œë ˆì´ì–´ ì¶”ê°€ ì‹œ, ìì‹ ì˜ boardStateë„ í•¨ê»˜ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.child('players').child(playerName).set({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: playerName,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isHost: false,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  joinedAt: Date.now(),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  boardState: {} // ì‹ ê·œ í”Œë ˆì´ì–´ì˜ ê°œë³„ ë¹™ê³ íŒ ìƒíƒœ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  // ë°© ì…ì¥ ì‹œ ë°© í¬ê¸° ë° ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ ë™ê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  gameState.boardSize = roomData.boardSize || 3;

Â  Â  Â  Â  Â  Â  Â  Â  gameState.maxPlayers = roomData.maxPlayers || 2;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  setupRoomListeners();

Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`ë°©ì— ì…ì¥í–ˆìŠµë‹ˆë‹¤! ë°© ì½”ë“œ: ${roomCode}`, 'success');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë°© ì…ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë°© ë°ì´í„° ë¦¬ìŠ¤ë„ˆ ì„¤ì • (ëª¨ë“  ë°© ìƒíƒœ ë³€í™”ë¥¼ ì—¬ê¸°ì„œ ì²˜ë¦¬)

Â  Â  Â  Â  function setupRoomListeners() {

Â  Â  Â  Â  Â  Â  if (!gameState.roomRef) return;



Â  Â  Â  Â  Â  Â  gameState.roomRef.on('value', (snapshot) => {

Â  Â  Â  Â  Â  Â  Â  Â  const roomData = snapshot.val();

Â  Â  Â  Â  Â  Â  Â  Â  if (roomData) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // `gameState`ì˜ í•µì‹¬ ê°’ë“¤ì„ Firebaseì˜ ìµœì‹  `roomData`ë¡œ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.boardSize = roomData.boardSize || 3;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.maxPlayers = roomData.maxPlayers || 2;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.gameStarted = roomData.gameStarted || false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.winCondition = roomData.winCondition || 1;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.currentTurn = roomData.currentTurn !== null ? roomData.currentTurn : 0;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.missionMap = roomData.missionMap || {};

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µ ë’¤ì§‘íŒ ìˆ«ì ë™ê¸°í™” (ê°ì²´ í‚¤ë¥¼ ë°°ì—´ë¡œ ë³€í™˜)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.flippedNumbers = Object.keys(roomData.flippedNumbers || {}).map(Number);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // í”Œë ˆì´ì–´ ëª©ë¡ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.players) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.players = roomData.players;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.playerList = Object.values(roomData.players)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => a.joinedAt - b.joinedAt)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .map(player => player.name);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.players = {};

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.playerList = [];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updatePlayersDisplay();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë¯¸ì…˜ ëª©ë¡ ì—…ë°ì´íŠ¸ (ë°©ì¥ì´ ì•„ë‹ˆë©´ Firebase ë¯¸ì…˜ ëª©ë¡ ë™ê¸°í™”)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë¯¸ì…˜ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì— ë°©ì¥ì´ ì•„ë‹ˆë©´ Firebaseì—ì„œ ë¯¸ì…˜ì„ ë°›ì•„ì˜´

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!gameState.isHost && roomData.missions) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = roomData.missions;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay();



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // UI í™”ë©´ ì „í™˜ (ê²Œì„ ì‹œì‘ ì—¬ë¶€ì— ë”°ë¼)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.gameStarted) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('game-setup').style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('game-area').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('current-room-code').textContent = gameState.roomCode;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('flipped-numbers-count').textContent = gameState.flippedNumbers.length; // ê³µí†µ ë’¤ì§‘íŒ ìˆ«ì UI ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê²Œì„ ì‹œì‘ í›„ ìì‹ ì˜ ë¹™ê³ íŒì´ ì—†ê±°ë‚˜ í¬ê¸°ê°€ ë‹¤ë¥¼ ê²½ìš° ìƒì„± ì‹œë„

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const totalCells = gameState.boardSize * gameState.boardSize;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.bingoBoard.length !== totalCells || document.getElementById('bingo-board').children.length !== totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (Object.keys(gameState.missionMap).length === totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â generateBingoBoard();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('game-setup').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('game-area').style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateTurnDisplay();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ìì‹ ì˜ boardStateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹™ê³ íŒ UI ë™ê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.players[gameState.playerName] && gameState.players[gameState.playerName].boardState) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  syncBingoBoard(gameState.players[gameState.playerName].boardState);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  syncBingoBoard({}); // ìì‹ ì˜ boardStateê°€ ì—†ë‹¤ë©´ ë¹ˆ ìƒíƒœë¡œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checkBingoPossibility(); // ë¹™ê³  ë²„íŠ¼, í„´ ì¢…ë£Œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateBingoCellClickability(); // ì…€ í´ë¦­ ê°€ëŠ¥ ì—¬ë¶€ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë°©ì¥ ì „ìš© UI ì—…ë°ì´íŠ¸ (ì„ ê³µ ì„ íƒ)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë°©ì¥ì´ê³ , í”Œë ˆì´ì–´ê°€ 2ëª… ì´ìƒì¼ ë•Œë§Œ ì„ ê³µ ì„ íƒ ì˜µì…˜ì„ í‘œì‹œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.isHost && gameState.playerList.length > 1) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('first-player-section').classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateFirstPlayerOptions(); // í”Œë ˆì´ì–´ ëª©ë¡ì— ë”°ë¼ ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('first-player-section').classList.add('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ìŠ¹ìê°€ ê²°ì •ë˜ì—ˆë‹¤ë©´ ìŠ¹ë¦¬ ë©”ì‹œì§€ í‘œì‹œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.winner) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWinnerMessage(roomData.winner, roomData.winCondition);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').style.display = 'none'; // ë²„íŠ¼ ìˆ¨ê¹€

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').style.display = 'none'; // ë²„íŠ¼ ìˆ¨ê¹€

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const winnerOverlay = document.getElementById('winner-overlay');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (winnerOverlay) winnerOverlay.remove();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê²Œì„ ì¤‘ì´ ì•„ë‹ˆë¼ë©´ ë²„íŠ¼ì„ ë‹¤ì‹œ ë³´ì´ê²Œ í•¨ (setup í™”ë©´ì—ì„  í•­ìƒ ë³´ì„)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.gameStarted) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¯¸ì…˜ ì¶”ê°€

Â  Â  Â  Â  async function addMission() {

Â  Â  Â  Â  Â  Â  const missionInput = document.getElementById('mission-input');

Â  Â  Â  Â  Â  Â  const mission = missionInput.value.trim();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (!mission) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¯¸ì…˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (gameState.missions.includes(mission)) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì´ë¯¸ ì¶”ê°€ëœ ë¯¸ì…˜ì…ë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const newMissions = [...gameState.missions, mission];

Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = newMissions; // ë¡œì»¬ gameState ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay(); // UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // í˜¸ìŠ¤íŠ¸ë§Œ Firebaseì— ë¯¸ì…˜ ì—…ë°ì´íŠ¸ (ë°©ì´ ìƒì„±ëœ ê²½ìš°ì—ë§Œ)

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.isHost && gameState.roomRef) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.child('missions').set(newMissions);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  missionInput.value = '';

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¯¸ì…˜ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¯¸ì…˜ ì‚­ì œ

Â  Â  Â  Â  async function deleteMission(index) {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const newMissions = gameState.missions.filter((_, i) => i !== index);

Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = newMissions; // ë¡œì»¬ gameState ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay(); // UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸



Â  Â  Â  Â  Â  Â  Â  Â  // í˜¸ìŠ¤íŠ¸ë§Œ Firebaseì— ë¯¸ì…˜ ì—…ë°ì´íŠ¸ (ë°©ì´ ìƒì„±ëœ ê²½ìš°ì—ë§Œ)

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.isHost && gameState.roomRef) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.child('missions').set(newMissions);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¯¸ì…˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¯¸ì…˜ ì €ì¥ í•¨ìˆ˜ (localStorage)

Â  Â  Â  Â  function saveMissions() {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('savedBingoMissions', JSON.stringify(gameState.missions));

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í˜„ì¬ ë¯¸ì…˜ ëª©ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…', 'success');

Â  Â  Â  Â  Â  Â  } catch (e) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¯¸ì…˜ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì €ì¥ ê³µê°„ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error("Failed to save missions to localStorage:", e);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¯¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜ (localStorage ë˜ëŠ” ê¸°ë³¸ê°’)

Â  Â  Â  Â  function loadMissions() {

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const savedMissions = localStorage.getItem('savedBingoMissions');

Â  Â  Â  Â  Â  Â  Â  Â  if (savedMissions) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = JSON.parse(savedMissions);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì €ì¥ëœ ë¯¸ì…˜ ëª©ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! ğŸ“', 'success');

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = [...defaultMissions]; // ê¸°ë³¸ ë¯¸ì…˜ ì‚¬ìš©

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì €ì¥ëœ ë¯¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ë¯¸ì…˜ ëª©ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. â„¹ï¸', 'info');

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay(); // ë¯¸ì…˜ UI ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  } catch (e) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¯¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. âŒ', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error("Failed to load missions from localStorage:", e);

Â  Â  Â  Â  Â  Â  Â  Â  gameState.missions = [...defaultMissions]; // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ë¯¸ì…˜ ì‚¬ìš©

Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }





Â  Â  Â  Â  // ê²Œì„ ì‹œì‘

Â  Â  Â  Â  async function startGame() {

Â  Â  Â  Â  Â  Â  console.log('startGame í•¨ìˆ˜ ì‹œì‘');

Â  Â  Â  Â  Â  Â  if (!gameState.roomCode) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¨¼ì € ë°©ì„ ìƒì„±í•˜ê±°ë‚˜ ì…ì¥í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const requiredMissions = gameState.boardSize * gameState.boardSize;

Â  Â  Â  Â  Â  Â  console.log(`í•„ìš” ë¯¸ì…˜ ìˆ˜: ${requiredMissions}, í˜„ì¬ ë¯¸ì…˜ ìˆ˜: ${gameState.missions.length}`);

Â  Â  Â  Â  Â  Â  if (gameState.missions.length < requiredMissions) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`ë¯¸ì…˜ì´ ìµœì†Œ ${requiredMissions}ê°œ í•„ìš”í•©ë‹ˆë‹¤! í˜„ì¬ ${gameState.missions.length}ê°œ`, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  if (!gameState.isHost) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë°©ì¥ë§Œ ê²Œì„ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  console.log(`í˜„ì¬ í”Œë ˆì´ì–´ ìˆ˜: ${gameState.playerList.length}`);

Â  Â  Â  Â  Â  Â  if (gameState.playerList.length < 2) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ ìµœì†Œ 2ëª… ì´ìƒì˜ í”Œë ˆì´ì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const firstPlayerSelect = document.getElementById('first-player-select');

Â  Â  Â  Â  Â  Â  const firstPlayer = firstPlayerSelect.value;

Â  Â  Â  Â  Â  Â  console.log(`ì„ íƒëœ ì„ ê³µ í”Œë ˆì´ì–´: ${firstPlayer}`);

Â  Â  Â  Â  Â  Â  if (!firstPlayer) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì„ ê³µ í”Œë ˆì´ì–´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const firstPlayerIndex = gameState.playerList.indexOf(firstPlayer);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  console.log('ë¯¸ì…˜ ë§µ ìƒì„± ì‹œì‘');

Â  Â  Â  Â  Â  Â  const shuffledMissions = [...gameState.missions].sort(() => Math.random() - 0.5).slice(0, requiredMissions);

Â  Â  Â  Â  Â  Â  // 1ë¶€í„° requiredMissionsê¹Œì§€ì˜ ìˆ«ìë¥¼ ìƒì„±í•˜ê³  ì„ìŠµë‹ˆë‹¤.

Â  Â  Â  Â  Â  Â  const shuffledNumbersForMap = Array.from({length: requiredMissions}, (_, i) => i + 1).sort(() => Math.random() - 0.5);



Â  Â  Â  Â  Â  Â  const missionMap = {};

Â  Â  Â  Â  Â  Â  for (let i = 0; i < requiredMissions; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  missionMap[shuffledNumbersForMap[i]] = shuffledMissions[i];

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  console.log('ìƒì„±ëœ missionMap:', missionMap);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const winCondition = document.querySelector('input[name="win-condition"]:checked').value;

Â  Â  Â  Â  Â  Â  Â  Â  const selectedBoardSize = 3;

Â  Â  Â  Â  Â  Â  Â  Â  // ë°© ìƒì„± ì‹œ ì„¤ì •ëœ maxPlayers ê°’ì„ ì‚¬ìš©

Â  Â  Â  Â  Â  Â  Â  Â  const selectedMaxPlayers = gameState.maxPlayers;Â 

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  console.log('Firebase room ì—…ë°ì´íŠ¸ ì‹œë„');

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.update({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameStarted: true,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winCondition: parseInt(winCondition),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  boardSize: selectedBoardSize,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maxPlayers: selectedMaxPlayers,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startedAt: firebase.database.ServerValue.TIMESTAMP, // ì‹œì‘ ì‹œê°„ ê¸°ë¡

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTurn: firstPlayerIndex,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flippedNumbers: {}, // ê³µí†µ ë’¤ì§‘íŒ ìˆ«ì ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winner: null,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameEnded: false,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  missionMap: missionMap, // ìƒì„±ëœ ë¯¸ì…˜ ë§µ ì €ì¥

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoClaimed: null

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  console.log('Firebase room ì—…ë°ì´íŠ¸ ì„±ê³µ');



Â  Â  Â  Â  Â  Â  Â  Â  // ëª¨ë“  í”Œë ˆì´ì–´ì˜ boardState ì´ˆê¸°í™” (Firebase ë°ì´í„° ì‚­ì œ í›„ ë‹¤ì‹œ ìƒì„±)

Â  Â  Â  Â  Â  Â  Â  Â  const updates = {};

Â  Â  Â  Â  Â  Â  Â  Â  for (const player in gameState.players) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updates[`players/${player}/boardState`] = {};

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.update(updates);

Â  Â  Â  Â  Â  Â  Â  Â  console.log('í”Œë ˆì´ì–´ boardState ì´ˆê¸°í™” ì„±ê³µ');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ê²Œì„ ì‹œì‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error('ê²Œì„ ì‹œì‘ ì˜¤ë¥˜:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  console.log('startGame í•¨ìˆ˜ ì¢…ë£Œ');

Â  Â  Â  Â  }



Â  Â  Â  Â  // ê²Œì„ ë°ì´í„° ë¡œë“œ (setupRoomListenersê°€ ëŒ€ë¶€ë¶„ ì²˜ë¦¬í•˜ë¯€ë¡œ ê°„ë‹¨í•´ì§)

Â  Â  Â  Â  async function loadGameData() {

Â  Â  Â  Â  Â  Â  const totalCells = gameState.boardSize * gameState.boardSize;

Â  Â  Â  Â  Â  Â  if (gameState.gameStarted && gameState.bingoBoard.length !== totalCells && Object.keys(gameState.missionMap).length === totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  generateBingoBoard();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ì„ ê³µ í”Œë ˆì´ì–´ ì˜µì…˜ ì—…ë°ì´íŠ¸ (ë°©ì¥ì—ê²Œë§Œ ë³´ì„)

Â  Â  Â  Â  function updateFirstPlayerOptions() {

Â  Â  Â  Â  Â  Â  const firstPlayerSelect = document.getElementById('first-player-select');

Â  Â  Â  Â  Â  Â  // ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  firstPlayerSelect.innerHTML = '<option value="">ì„ ê³µì„ ì„ íƒí•˜ì„¸ìš”</option>';

Â  Â  Â  Â  Â  Â  gameState.playerList.forEach(playerName => {

Â  Â  Â  Â  Â  Â  Â  Â  const option = document.createElement('option');

Â  Â  Â  Â  Â  Â  Â  Â  option.value = playerName;

Â  Â  Â  Â  Â  Â  Â  Â  option.textContent = playerName;

Â  Â  Â  Â  Â  Â  Â  Â  firstPlayerSelect.appendChild(option);

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Firebaseì— í˜„ì¬ í„´ì´ ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ í•´ë‹¹ í”Œë ˆì´ì–´ ì„ íƒ

Â  Â  Â  Â  Â  Â  if (gameState.currentTurn !== null && gameState.playerList[gameState.currentTurn]) {

Â  Â  Â  Â  Â  Â  Â  Â  firstPlayerSelect.value = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // í„´ í‘œì‹œ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  function updateTurnDisplay() {

Â  Â  Â  Â  Â  Â  const turnElement = document.getElementById('current-turn');

Â  Â  Â  Â  Â  Â  if (turnElement && gameState.playerList.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  const currentPlayerName = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  Â  Â  const isMyTurn = currentPlayerName === gameState.playerName;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (isMyTurn) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  turnElement.innerHTML = '<span style="color: #667eea; font-weight: bold;">ë‹¹ì‹ ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!</span>';

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  turnElement.textContent = `${currentPlayerName}ì˜ ì°¨ë¡€`;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¹™ê³ íŒ UI ë™ê¸°í™” (ìì‹ ì˜ ê°œë³„ boardState ë° ê³µí†µ flippedNumbers ê¸°ë°˜)

Â  Â  Â  Â  function syncBingoBoard(myBoardStateData) {

Â  Â  Â  Â  Â  Â  const totalCells = gameState.boardSize * gameState.boardSize;



Â  Â  Â  Â  Â  Â  // MissionMapì´ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ê±°ë‚˜, ë¹™ê³ íŒì´ ìƒì„±ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì¬ì‹œë„

Â  Â  Â  Â  Â  Â  if (Object.keys(gameState.missionMap).length === 0 || gameState.bingoBoard.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.gameStarted && Object.keys(gameState.missionMap).length === totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateBingoBoard();

Â  Â  Â  Â  Â  Â  Â  Â  } else if (gameState.gameStarted && Object.keys(gameState.missionMap).length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê²Œì„ì€ ì‹œì‘ëëŠ”ë° ë¯¸ì…˜ ë§µì´ ì•„ì§ ì•ˆë“¤ì–´ì™”ìœ¼ë©´ ê¸°ë‹¤ë¦¼ (ë“œë¬¸ ê²½ìš°)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn("syncBingoBoard: Waiting for missionMap to load...");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => syncBingoBoard(myBoardStateData), 100);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê²Œì„ ì‹œì‘ ì „ì´ê±°ë‚˜, ë¯¸ì…˜ ë§µì´ ì•„ì§ ì—†ëŠ” ê²½ìš°

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // DOMì— ë¹™ê³  ì…€ì´ ì•„ì§ ì—†ìœ¼ë©´ ê¸°ë‹¤ë¦¼

Â  Â  Â  Â  Â  Â  const bingoBoardElement = document.getElementById('bingo-board');

Â  Â  Â  Â  Â  Â  if (bingoBoardElement.children.length === 0 || bingoBoardElement.children.length !== totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  console.warn("syncBingoBoard: Waiting for bingo board DOM to be generated...");

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => syncBingoBoard(myBoardStateData), 50);

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const cells = bingoBoardElement.querySelectorAll('.bingo-cell');

Â  Â  Â  Â  Â  Â  let markedCellsCount = 0;



Â  Â  Â  Â  Â  Â  for (let i = 0; i < totalCells; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  const cellInLocalBoard = gameState.bingoBoard[i]; // ë¡œì»¬ ë¹™ê³ íŒì˜ ìˆ«ì/ë¯¸ì…˜ ì •ë³´

Â  Â  Â  Â  Â  Â  Â  Â  const cellNumber = cellInLocalBoard.number;

Â  Â  Â  Â  Â  Â  Â  Â  const missionText = cellInLocalBoard.mission; // ë¡œì»¬ì— ì €ì¥ëœ ë¯¸ì…˜ (ë¯¸ì…˜ë§µì—ì„œ ì˜´)



Â  Â  Â  Â  Â  Â  Â  Â  // Firebaseì˜ ê³µí†µ ë’¤ì§‘íŒ ìˆ«ì ëª©ë¡ì— í•´ë‹¹ ìˆ«ìê°€ ìˆëŠ”ì§€ í™•ì¸

Â  Â  Â  Â  Â  Â  Â  Â  const isFlippedCommon = gameState.flippedNumbers.includes(cellNumber);

Â  Â  Â  Â  Â  Â  Â  Â  // Firebaseì˜ ë‚´ ê°œì¸ boardStateì— ì´ ìˆ«ìì— ëŒ€í•œ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸

Â  Â  Â  Â  Â  Â  Â  Â  const myCellStateFromFirebase = myBoardStateData[cellNumber] ? myBoardStateData[cellNumber].state : 'unflipped';



Â  Â  Â  Â  Â  Â  Â  Â  const cellElement = cells[i];

Â  Â  Â  Â  Â  Â  Â  Â  cellElement.classList.remove('flipped', 'failed');



Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µìœ¼ë¡œ ë’¤ì§‘íŒ ìˆ«ì (ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì„ íƒ)

Â  Â  Â  Â  Â  Â  Â  Â  if (isFlippedCommon) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (myCellStateFromFirebase === 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.classList.add('flipped');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.textContent = missionText;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  markedCellsCount++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (myCellStateFromFirebase === 'failed') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.classList.add('failed');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.textContent = missionText;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  markedCellsCount++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µìœ¼ë¡œ ë’¤ì§‘í˜”ëŠ”ë° ë‚´ ìƒíƒœê°€ unflippedì¸ ê²½ìš°, ë‚˜ë„ flippedë¡œ í‘œì‹œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.classList.add('flipped');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.textContent = missionText;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  markedCellsCount++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Firebaseì— ë‚˜ì˜ ìƒíƒœë„ flippedë¡œ ë°˜ì˜ (ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ë’¤ì§‘ì—ˆì„ ë•Œ ë‚˜ë„ ìë™ìœ¼ë¡œ ë’¤ì§‘í˜)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef.child(`players/${gameState.playerName}/boardState/${cellNumber}`).set({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state: 'flipped',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mission: missionText,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  changedAt: firebase.database.ServerValue.TIMESTAMP

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }).catch(error => console.error("Auto-flip update failed:", error));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ìˆ«ì (ì•„ì§ ì•„ë¬´ë„ ì„ íƒ ì•ˆ í•¨)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.textContent = cellNumber;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // 'remaining-missions-count'ëŠ” ê²Œì„ ì¤‘ì—ëŠ” ì˜ë¯¸ê°€ ì—†ìœ¼ë¯€ë¡œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨

Â  Â  Â  Â  Â  Â  // ëŒ€ì‹  'flipped-numbers-count'ëŠ” setupRoomListenersì—ì„œ ì´ë¯¸ ì—…ë°ì´íŠ¸ë¨

Â  Â  Â  Â  }





Â  Â  Â  Â  // ê³µí†µìœ¼ë¡œ ë’¤ì§‘íŒ ìˆ«ì ëª©ë¡ì— ë”°ë¼ ë¹™ê³  ì…€ì˜ í´ë¦­ ê°€ëŠ¥ ì—¬ë¶€ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  // (ì´ í•¨ìˆ˜ëŠ” setupRoomListenersì˜ on('value')ì—ì„œ í˜¸ì¶œë¨)

Â  Â  Â  Â  function updateBingoCellClickability() {

Â  Â  Â  Â  Â  Â  const cells = document.querySelectorAll('.bingo-cell');

Â  Â  Â  Â  Â  Â  const currentPlayerName = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  const isMyTurn = currentPlayerName === gameState.playerName;

Â  Â  Â  Â  Â  Â  // ê²Œì„ ì¢…ë£Œ ì—¬ë¶€ëŠ” roomData.gameEnded ë˜ëŠ” roomData.winnerë¡œ í™•ì¸

Â  Â  Â  Â  Â  Â  // setupRoomListenersì—ì„œ roomDataë¥¼ í†µí•´ ì§ì ‘ í™•ì¸í•˜ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” í•´ë‹¹ ìƒíƒœë¥¼ ì°¸ì¡°

Â  Â  Â  Â  Â  Â  const gameEnded = gameState.gameStarted && (gameState.roomRef && gameState.roomRef.gameEnded || gameState.roomRef && gameState.roomRef.winner);





Â  Â  Â  Â  Â  Â  cells.forEach((cellElement, index) => {

Â  Â  Â  Â  Â  Â  Â  Â  const cellNumber = gameState.bingoBoard[index].number;

Â  Â  Â  Â  Â  Â  Â  Â  const isFlippedCommon = gameState.flippedNumbers.includes(cellNumber); // ì´ ìˆ«ìê°€ ê³µí†µìœ¼ë¡œ ë’¤ì§‘í˜”ëŠ”ì§€



Â  Â  Â  Â  Â  Â  Â  Â  if (gameEnded) { // ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆë‹¤ë©´ ëª¨ë“  ì…€ í´ë¦­ ë¶ˆê°€

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '0.7';

Â  Â  Â  Â  Â  Â  Â  Â  } else if (isMyTurn) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë‚´ í„´ì¼ ë•Œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isFlippedCommon && !gameState.hasMadeMoveInTurn) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì•„ì§ ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì•˜ê³  (ë‚´ê°€ ì•„ì§ ì´ë²ˆ í„´ì— ì„ íƒ ì•ˆ í–ˆë‹¤ë©´) -> í´ë¦­ ê°€ëŠ¥

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'auto';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '1';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (isFlippedCommon) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì´ë¯¸ ê³µí†µìœ¼ë¡œ ë’¤ì§‘íŒ ìˆ«ì -> ë‚´ ê°œì¸ ë¹™ê³ íŒ ìƒíƒœ (flipped/failed)ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ í´ë¦­ ê°€ëŠ¥

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'auto';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '1';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // !isFlippedCommon && gameState.hasMadeMoveInTurn (ë‚´ í„´ì— ì´ë¯¸ í•˜ë‚˜ í´ë¦­í–ˆê³ , ì•„ì§ ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ë‹¤ë¥¸ ì…€)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '0.5';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  } else { // ë‚´ í„´ì´ ì•„ë‹ ë•Œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isFlippedCommon) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ë’¤ì§‘ì€ ì…€ -> ë‚˜ë„ ë‚´ ê°œì¸ ë¹™ê³ íŒ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'auto';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '1';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì•„ì§ ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ì…€ -> í´ë¦­ ë¶ˆê°€

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.pointerEvents = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cellElement.style.opacity = '0.5';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }





Â  Â  Â  Â  // ë¹™ê³  ê°€ëŠ¥ ì—¬ë¶€ (ë²„íŠ¼ í™œì„±í™”) í™•ì¸ ë° UI ì—…ë°ì´íŠ¸

Â  Â  Â  Â  function checkBingoPossibility() {

Â  Â  Â  Â  Â  Â  const board = gameState.bingoBoard;

Â  Â  Â  Â  Â  Â  const size = gameState.boardSize;

Â  Â  Â  Â  Â  Â  const requiredLines = gameState.winCondition;

Â  Â  Â  Â  Â  Â  let completedLines = 0;

Â  Â  Â  Â  Â  Â  const bingoButton = document.getElementById('bingo-button');

Â  Â  Â  Â  Â  Â  const turnEndButton = document.getElementById('turn-end-button');

Â  Â  Â  Â  Â  Â  const currentPlayerName = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  const isMyTurn = currentPlayerName === gameState.playerName;



Â  Â  Â  Â  Â  Â  // ê²Œì„ ì‹œì‘ ì „ì´ê±°ë‚˜ ë°© ë ˆí¼ëŸ°ìŠ¤ê°€ ì—†ìœ¼ë©´ ë²„íŠ¼ ë¹„í™œì„±í™” (ë³´ì´ê¸°ëŠ” í•¨)

Â  Â  Â  Â  Â  Â  if (!gameState.gameStarted || !gameState.roomRef) {

Â  Â  Â  Â  Â  Â  Â  Â  gameState.canClaimBingo = false;

Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Firebaseì—ì„œ ìµœì‹  ê²Œì„ ìƒíƒœ (gameEnded, winner)ë¥¼ ê°€ì ¸ì˜´

Â  Â  Â  Â  Â  Â  gameState.roomRef.once('value').then(snapshot => {

Â  Â  Â  Â  Â  Â  Â  Â  const roomData = snapshot.val();

Â  Â  Â  Â  Â  Â  Â  Â  if (!roomData) return;



Â  Â  Â  Â  Â  Â  Â  Â  // ê²Œì„ì´ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ìŠ¹ìê°€ ìˆë‹¤ë©´ ë²„íŠ¼ ë¹„í™œì„±í™”

Â  Â  Â  Â  Â  Â  Â  Â  if (roomData.gameEnded || roomData.winner) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // ë¹™ê³  ë¼ì¸ ì²´í¬ ('flipped' ìƒíƒœë§Œ ì¸ì •)

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < size; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let rowComplete = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let j = 0; j < size; j++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const index = i * size + j;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë‚˜ì˜ ë¡œì»¬ ë¹™ê³  ë³´ë“œ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ì—¬ 'flipped'ì¸ì§€ í™•ì¸

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!board[index] || !roomData.players[gameState.playerName] || !roomData.players[gameState.playerName].boardState || roomData.players[gameState.playerName].boardState[board[index].number]?.state !== 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rowComplete = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (rowComplete) completedLines++;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  for (let j = 0; j < size; j++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let colComplete = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < size; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const index = i * size + j;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!board[index] || !roomData.players[gameState.playerName] || !roomData.players[gameState.playerName].boardState || roomData.players[gameState.playerName].boardState[board[index].number]?.state !== 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  colComplete = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (colComplete) completedLines++;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  let diag1Complete = true;

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < size; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const index = i * size + i;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!board[index] || !roomData.players[gameState.playerName] || !roomData.players[gameState.playerName].boardState || roomData.players[gameState.playerName].boardState[board[index].number]?.state !== 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  diag1Complete = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (diag1Complete) completedLines++;



Â  Â  Â  Â  Â  Â  Â  Â  let diag2Complete = true;

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < size; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const index = i * size + (size - 1 - i);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!board[index] || !roomData.players[gameState.playerName] || !roomData.players[gameState.playerName].boardState || roomData.players[gameState.playerName].boardState[board[index].number]?.state !== 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  diag2Complete = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (diag2Complete) completedLines++;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  console.log(`${gameState.playerName}: í˜„ì¬ ì™„ì„±ëœ ë¼ì¸ ìˆ˜ (ì‹¤íŒ¨ ì œì™¸) = ${completedLines}`);



Â  Â  Â  Â  Â  Â  Â  Â  // --- ë¹™ê³  ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” ë¡œì§ ---

Â  Â  Â  Â  Â  Â  Â  Â  if (completedLines >= requiredLines) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.canClaimBingo = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë‚´ í„´ì´ê³ , ê²Œì„ì´ ì•„ì§ ì¢…ë£Œë˜ì§€ ì•Šì•˜ê³ , ìŠ¹ìê°€ ì—†ì„ ë•Œë§Œ ë¹™ê³  ë²„íŠ¼ í™œì„±í™”

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.disabled = !isMyTurn || roomData.gameEnded || roomData.winner;

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.canClaimBingo = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // --- í„´ ì¢…ë£Œ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” ë¡œì§ ---

Â  Â  Â  Â  Â  Â  Â  Â  // ë‚´ í„´ì´ê³ , ê²Œì„ì´ ì•„ì§ ì¢…ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©°, ìŠ¹ìê°€ ì—†ê³ , í˜„ì¬ í„´ì— ìµœì†Œ í•œ ë²ˆ ì…€ì„ í´ë¦­í–ˆë‹¤ë©´ í™œì„±í™”

Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.disabled = !isMyTurn || roomData.gameEnded || roomData.winner || !gameState.hasMadeMoveInTurn;



Â  Â  Â  Â  Â  Â  }).catch(error => {

Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error checking bingo possibility:", error);

Â  Â  Â  Â  Â  Â  Â  Â  showMessage("ë¹™ê³ /í„´ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ!", "error");

Â  Â  Â  Â  Â  Â  Â  Â  bingoButton.disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  turnEndButton.disabled = true;

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }



Â  Â  Â  Â  // í„´ ì¢…ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œ

Â  Â  Â  Â  async function turnEnd() {

Â  Â  Â  Â  Â  Â  const currentPlayerName = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  if (currentPlayerName !== gameState.playerName) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë‹¹ì‹ ì˜ ì°¨ë¡€ê°€ ì•„ë‹™ë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const roomSnapshot = await gameState.roomRef.once('value');

Â  Â  Â  Â  Â  Â  const roomData = roomSnapshot.val();



Â  Â  Â  Â  Â  Â  if (roomData.gameEnded || roomData.winner) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ê²Œì„ì€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  if (!gameState.hasMadeMoveInTurn) { // ì…€ì„ í´ë¦­í•˜ì§€ ì•Šì•˜ìœ¼ë©´ í„´ ì¢…ë£Œ ë¶ˆê°€

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì…€ì„ í•˜ë‚˜ë¼ë„ ë’¤ì§‘ì–´ì•¼ í„´ì„ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  // ë‹¤ìŒ í„´ìœ¼ë¡œ ë„˜ê¹€

Â  Â  Â  Â  Â  Â  Â  Â  const nextTurn = (gameState.currentTurn + 1) % gameState.playerList.length;

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.update({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTurn: nextTurn

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í„´ì„ ì¢…ë£Œí–ˆìŠµë‹ˆë‹¤.', 'info');

Â  Â  Â  Â  Â  Â  Â  Â  gameState.hasMadeMoveInTurn = false; // í„´ ì¢…ë£Œ ì‹œ ìƒíƒœ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  Â  Â  // í„´ ì¢…ë£Œ ì‹œ ë²„íŠ¼ ë¹„í™œì„±í™” (ìƒˆë¡œìš´ í„´ ì£¼ì¸ì´ UI ì—…ë°ì´íŠ¸ í•˜ë©´ì„œ ë‹¤ì‹œ í™œì„±í™”ë  ê²ƒ)

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').disabled = true;

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í„´ ì¢…ë£Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Turn End Error:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¹™ê³  ë²„íŠ¼ í´ë¦­ ì‹œ ìŠ¹ë¦¬ ì£¼ì¥

Â  Â  Â  Â  async function claimBingo() {

Â  Â  Â  Â  Â  Â  if (!gameState.canClaimBingo) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¹™ê³ ë¥¼ ì£¼ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¡°ê±´ì„ ë‹¤ì‹œ í™•ì¸í•˜ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const roomSnapshot = await gameState.roomRef.once('value');

Â  Â  Â  Â  Â  Â  const roomData = roomSnapshot.val();



Â  Â  Â  Â  Â  Â  if (roomData.gameEnded || roomData.winner) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ê²Œì„ì€ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ìŠ¹ìê°€ ê²°ì •ë˜ì—ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (roomData.bingoClaimed) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì´ë¯¸ ë¹™ê³ ë¥¼ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const result = await gameState.roomRef.child('bingoClaimed').transaction((currentClaim) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentClaim === null) { // ì•„ì§ ë¹™ê³ ë¥¼ ì£¼ì¥í•œ ì‚¬ëŒì´ ì—†ë‹¤ë©´

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  claimer: gameState.playerName,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timestamp: firebase.database.ServerValue.TIMESTAMP

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return undefined; // ì´ë¯¸ ì£¼ì¥í•œ ì‚¬ëŒì´ ìˆë‹¤ë©´ íŠ¸ëœì­ì…˜ ì·¨ì†Œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  if (result.committed) { // íŠ¸ëœì­ì…˜ ì„±ê³µ (ë‚´ê°€ ë¹™ê³  ì£¼ì¥ ì„ ì  ì„±ê³µ)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.update({

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winner: gameState.playerName,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameEnded: true,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endedAt: firebase.database.ServerValue.TIMESTAMP

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ğŸ‰ ë¹™ê³ ë¥¼ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤! ë‹¹ì‹ ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤!', 'success');

Â  Â  Â  Â  Â  Â  Â  Â  } else { // íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ (ë‹¤ë¥¸ ì‚¬ëŒì´ ë¨¼ì € ì£¼ì¥í•¨)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì•—! ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ë¨¼ì € ë¹™ê³ ë¥¼ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').disabled = true;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').style.display = 'none';

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë¹™ê³  ì£¼ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Claim Bingo Error:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ìŠ¹ë¦¬ ë©”ì‹œì§€ í‘œì‹œ íŒì—…

Â  Â  Â  Â  function displayWinnerMessage(winnerName, winCondition) {

Â  Â  Â  Â  Â  Â  if (document.getElementById('winner-overlay')) {

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const overlay = document.createElement('div');

Â  Â  Â  Â  Â  Â  overlay.classList.add('winner-overlay');

Â  Â  Â  Â  Â  Â  overlay.id = 'winner-overlay';



Â  Â  Â  Â  Â  Â  const messageBox = document.createElement('div');

Â  Â  Â  Â  Â  Â  messageBox.classList.add('winner-message');

Â  Â  Â  Â  Â  Â  messageBox.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  <p class="emoji">ğŸ‰ğŸ†</p>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="winner-text gradient-text">${winnerName}ë‹˜</p>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="winner-text gradient-text">${winCondition}ì¤„ ë¹™ê³ ë¡œ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!</p>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="closeWinnerMessage()">í™•ì¸</button>

Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  overlay.appendChild(messageBox);

Â  Â  Â  Â  Â  Â  document.body.appendChild(overlay);

Â  Â  Â  Â  }



Â  Â  Â  Â  // ìŠ¹ë¦¬ ë©”ì‹œì§€ íŒì—… ë‹«ê¸°

Â  Â  Â  Â  function closeWinnerMessage() {

Â  Â  Â  Â  Â  Â  const overlay = document.getElementById('winner-overlay');

Â  Â  Â  Â  Â  Â  if (overlay) {

Â  Â  Â  Â  Â  Â  Â  Â  overlay.remove();

Â  Â  Â  Â  Â  Â  Â  Â  if (confirm('ì„¤ì • í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ?')) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backToSetup();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ì„¤ì • í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸° (ëª¨ë“  ê²Œì„ ìƒíƒœ ë° UI ì´ˆê¸°í™”)

Â  Â  Â  Â  function backToSetup() {

Â  Â  Â  Â  Â  Â  document.getElementById('game-setup').style.display = 'block';

Â  Â  Â  Â  Â  Â  document.getElementById('game-area').style.display = 'none';

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (gameState.roomRef) {

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef.off(); // ë°©ì„ ë– ë‚  ë•Œ Firebase ë¦¬ìŠ¤ë„ˆ í•´ì œ

Â  Â  Â  Â  Â  Â  Â  Â  // ë°©ì¥ì´ ë°©ì„ ë‚˜ê°ˆ ë•Œë§Œ ë°© ì •ë³´ë¥¼ ì‚­ì œ

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.isHost) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë°©ì¥ì´ ë°©ì„ ë‚˜ê°ˆ ë•Œ, í•´ë‹¹ ë°© ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë¡œì§ ì¶”ê°€

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë°©ì„ ë‚˜ê°„ë‹¤ê³  ë°”ë¡œ ì‚­ì œí•˜ë©´ ì•ˆ ë˜ë¯€ë¡œ,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // 'ë°© íŒŒê¸°' ë²„íŠ¼ì´ë‚˜ 'ì¼ì • ì‹œê°„ ë¹„í™œì„± ì‹œ ìë™ ì‚­ì œ' ë¡œì§ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ 'host' í”Œë ˆì´ì–´ ì •ë³´ë§Œ ì‚­ì œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // await gameState.roomRef.remove(); // ë°© ì „ì²´ ì‚­ì œëŠ” ìœ„í—˜í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef.child('players').child(gameState.playerName).remove();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`í˜¸ìŠ¤íŠ¸ ${gameState.playerName}ì´(ê°€) ë°©ì„ ë‚˜ê°‘ë‹ˆë‹¤. ë°© ë°ì´í„° ì‚­ì œë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì°¸ê°€ìëŠ” ìì‹ ì˜ í”Œë ˆì´ì–´ ì •ë³´ë§Œ ì‚­ì œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef.child('players').child(gameState.playerName).remove();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`í”Œë ˆì´ì–´ ${gameState.playerName}ì´(ê°€) ë°©ì„ ë‚˜ê°‘ë‹ˆë‹¤.`);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // gameState ê°ì²´ ì´ˆê¸°í™”

Â  Â  Â  Â  Â  Â  gameState = {

Â  Â  Â  Â  Â  Â  Â  Â  isHost: false,

Â  Â  Â  Â  Â  Â  Â  Â  roomCode: '',

Â  Â  Â  Â  Â  Â  Â  Â  playerName: '',

Â  Â  Â  Â  Â  Â  Â  Â  players: {},

Â  Â  Â  Â  Â  Â  Â  Â  missions: [], // ì´ˆê¸°í™” ì‹œ ë¹ˆ ë°°ì—´ë¡œ, ì´í›„ loadMissionsì—ì„œ ì±„ì›Œì§

Â  Â  Â  Â  Â  Â  Â  Â  winCondition: 1,

Â  Â  Â  Â  Â  Â  Â  Â  boardSize: 3,

Â  Â  Â  Â  Â  Â  Â  Â  maxPlayers: 2,

Â  Â  Â  Â  Â  Â  Â  Â  gameStarted: false,

Â  Â  Â  Â  Â  Â  Â  Â  bingoBoard: [],

Â  Â  Â  Â  Â  Â  Â  Â  currentTurn: 0,

Â  Â  Â  Â  Â  Â  Â  Â  playerList: [],

Â  Â  Â  Â  Â  Â  Â  Â  roomRef: null,

Â  Â  Â  Â  Â  Â  Â  Â  missionMap: {},

Â  Â  Â  Â  Â  Â  Â  Â  canClaimBingo: false,

Â  Â  Â  Â  Â  Â  Â  Â  flippedNumbers: [],

Â  Â  Â  Â  Â  Â  Â  Â  hasMadeMoveInTurn: false

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // UI ìš”ì†Œë“¤ì„ ì´ˆê¸° ìƒíƒœë¡œ ì¬ì„¤ì •

Â  Â  Â  Â  Â  Â  document.getElementById('players-list').innerHTML = '<div class="loading">ë°©ì— ì…ì¥í•˜ë©´ ì°¸ê°€ìê°€ í‘œì‹œë©ë‹ˆë‹¤</div>';

Â  Â  Â  Â  Â  Â  document.getElementById('missions-list').innerHTML = `<div style="text-align: center; color: #a0aec0; padding: 20px;">ë¯¸ì…˜ì„ ì¶”ê°€í•´ì£¼ì„¸ìš” (ìµœì†Œ ${gameState.boardSize * gameState.boardSize}ê°œ í•„ìš”)</div>`;

Â  Â  Â  Â  Â  Â  document.getElementById('current-mission-count').textContent = 'í˜„ì¬ ë“±ë¡ëœ ë¯¸ì…˜: 0ê°œ';

Â  Â  Â  Â  Â  Â  document.getElementById('share-section').classList.add('hidden');

Â  Â  Â  Â  Â  Â  document.getElementById('join-room-section').classList.add('hidden');

Â  Â  Â  Â  Â  Â  document.getElementById('auto-join-hint').classList.add('hidden');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // 'ìƒˆ ë°© ë§Œë“¤ê¸°'ì™€ 'ë°© ì…ì¥í•˜ê¸°' ë²„íŠ¼ ê·¸ë£¹ì„ ë‹¤ì‹œ ë³´ì´ê²Œ í•¨

Â  Â  Â  Â  Â  Â  document.getElementById('create-room-btn').classList.remove('hidden-by-url-param');

Â  Â  Â  Â  Â  Â  document.getElementById('max-players-create-group').classList.remove('hidden-by-url-param');

Â  Â  Â  Â  Â  Â  document.getElementById('main-action-buttons').classList.remove('hidden-by-url-param');



Â  Â  Â  Â  Â  Â  document.getElementById('room-code').readOnly = false; // ë°© ì½”ë“œ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  document.getElementById('first-player-section').classList.add('hidden');

Â  Â  Â  Â  Â  Â  document.getElementById('player-name').value = '';

Â  Â  Â  Â  Â  Â  document.getElementById('room-code').value = '';

Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').style.display = 'block'; // ë²„íŠ¼ì€ í•­ìƒ ë³´ì´ê²Œ

Â  Â  Â  Â  Â  Â  document.getElementById('bingo-button').disabled = true;

Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').style.display = 'block'; // ë²„íŠ¼ì€ í•­ìƒ ë³´ì´ê²Œ

Â  Â  Â  Â  Â  Â  document.getElementById('turn-end-button').disabled = true;

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ìŠ¹ë¦¬ ì˜¤ë²„ë ˆì´ ì œê±° (í˜¹ì‹œ ì´ì „ ê²Œì„ì—ì„œ ë‚¨ì•„ìˆì„ ê²½ìš°)

Â  Â  Â  Â  Â  Â  const winnerOverlay = document.getElementById('winner-overlay');

Â  Â  Â  Â  Â  Â  if (winnerOverlay) {

Â  Â  Â  Â  Â  Â  Â  Â  winnerOverlay.remove();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // ë¹™ê³ íŒ í¬ê¸°, ìŠ¹ë¦¬ ì¡°ê±´, ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ UIë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •

Â  Â  Â  Â  Â  Â  document.getElementById('size-3').checked = true;

Â  Â  Â  Â  Â  Â  document.getElementById('win-1').checked = true;

Â  Â  Â  Â  Â  Â  document.getElementById('max-players-create').value = 2; // ìƒˆë¡œ ì¶”ê°€ëœ ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”



Â  Â  Â  Â  Â  Â  document.getElementById('flipped-numbers-count').textContent = '0'; // ê³µí†µ ë¯¸ì…˜ ê°œìˆ˜ ì´ˆê¸°í™”



Â  Â  Â  Â  Â  Â  // 'game-options-section'ì´ ë‹¤ì‹œ ë³´ì´ë„ë¡ ì„¤ì •

Â  Â  Â  Â  Â  Â  document.getElementById('game-options-section').classList.remove('hidden');



Â  Â  Â  Â  Â  Â  // ì„¤ì • í™”ë©´ìœ¼ë¡œ ëŒì•„ì˜¬ ë•Œ ì €ì¥ëœ ë¯¸ì…˜ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜´

Â  Â  Â  Â  Â  Â  loadMissions();

Â  Â  Â  Â  }



Â  Â  Â  Â  // 6ìë¦¬ ëœë¤ ë°© ì½”ë“œ ìƒì„±

Â  Â  Â  Â  function generateRoomCode() {

Â  Â  Â  Â  Â  Â  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

Â  Â  Â  Â  Â  Â  let result = '';

Â  Â  Â  Â  Â  Â  for (let i = 0; i < 6; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  result += chars.charAt(Math.floor(Math.random() * chars.length));

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return result;

Â  Â  Â  Â  }



Â  Â  Â  Â  // í”Œë ˆì´ì–´ ëª©ë¡ UI ì—…ë°ì´íŠ¸

Â  Â  Â  Â  function updatePlayersDisplay() {

Â  Â  Â  Â  Â  Â  const playersList = document.getElementById('players-list');

Â  Â  Â  Â  Â  Â  const playersArray = Object.values(gameState.players);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (playersArray.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  playersList.innerHTML = '<div class="loading">ë°©ì— ì…ì¥í•˜ë©´ ì°¸ê°€ìê°€ í‘œì‹œë©ë‹ˆë‹¤</div>';

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  playersList.innerHTML = playersArray.map(player =>

Â  Â  Â  Â  Â  Â  Â  Â  `<div class="player-item ${player.isHost ? 'host' : ''}">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${player.isHost ? 'ğŸ‘‘' : 'ğŸ‘¤'} ${player.name} ${player.isHost ? '(ë°©ì¥)' : ''}

Â  Â  Â  Â  Â  Â  Â  Â  </div>`

Â  Â  Â  Â  Â  Â  ).join('');



Â  Â  Â  Â  Â  Â  const startBtn = document.getElementById('start-game-btn');

Â  Â  Â  Â  Â  Â  if (gameState.isHost) {

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.textContent = 'ğŸ® ê²Œì„ ì‹œì‘!';

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.disabled = false;

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.textContent = 'ë°©ì¥ì´ ê²Œì„ì„ ì‹œì‘í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...';

Â  Â  Â  Â  Â  Â  Â  Â  startBtn.disabled = true;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¯¸ì…˜ ëª©ë¡ UI ë° í˜„ì¬ ë¯¸ì…˜ ê°œìˆ˜ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  function updateMissionsDisplay() {

Â  Â  Â  Â  Â  Â  const missionsList = document.getElementById('missions-list');

Â  Â  Â  Â  Â  Â  const requiredMissions = gameState.boardSize * gameState.boardSize; // 3x3ì´ë¯€ë¡œ 9ê°œ



Â  Â  Â  Â  Â  Â  if (gameState.missions.length === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  missionsList.innerHTML = `<div style="text-align: center; color: #a0aec0; padding: 20px;">ë¯¸ì…˜ì„ ì¶”ê°€í•´ì£¼ì„¸ìš” (ìµœì†Œ ${requiredMissions}ê°œ í•„ìš”)</div>`;

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  missionsList.innerHTML = gameState.missions.map((mission, index) =>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<div class="mission-item">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ğŸ“Œ ${mission}</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${gameState.isHost ? `<button class="delete-btn" onclick="deleteMission(${index})">ì‚­ì œ</button>` : ''}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`

Â  Â  Â  Â  Â  Â  Â  Â  ).join('');

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  document.getElementById('current-mission-count').textContent = `í˜„ì¬ ë“±ë¡ëœ ë¯¸ì…˜: ${gameState.missions.length}ê°œ`;

Â  Â  Â  Â  }



Â  Â  Â  Â  // ë¹™ê³ íŒ ìƒì„± (Firebaseì˜ missionMap ê¸°ë°˜)

Â  Â  Â  Â  function generateBingoBoard() {

Â  Â  Â  Â  Â  Â  const size = gameState.boardSize;

Â  Â  Â  Â  Â  Â  const totalCells = size * size;



Â  Â  Â  Â  Â  Â  // missionMapì´ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ê±°ë‚˜ í¬ê¸°ê°€ ë§ì§€ ì•Šìœ¼ë©´ ê¸°ë‹¤ë¦¼

Â  Â  Â  Â  Â  Â  if (Object.keys(gameState.missionMap).length === 0 || Object.keys(gameState.missionMap).length !== totalCells) {

Â  Â  Â  Â  Â  Â  Â  Â  console.warn('generateBingoBoard: Mission map is not fully loaded yet or size mismatch. Retrying in 100ms...');

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(generateBingoBoard, 100);

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ì´ë¯¸ ì˜¬ë°”ë¥¸ í¬ê¸°ì˜ ë¹™ê³ íŒì´ ìƒì„±ë˜ì–´ ìˆë‹¤ë©´ ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ

Â  Â  Â  Â  Â  Â  const bingoBoardElement = document.getElementById('bingo-board');

Â  Â  Â  Â  Â  Â  if (gameState.bingoBoard.length === totalCells && bingoBoardElement.children.length === totalCells && bingoBoardElement.classList.contains(`size-${size}`)) {

Â  Â  Â  Â  Â  Â  Â  Â  bingoBoardElement.className = `bingo-board size-${size}`;

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  const numbers = Array.from({length: totalCells}, (_, i) => i + 1);

Â  Â  Â  Â  Â  Â  const shuffledNumbers = numbers.sort(() => Math.random() - 0.5);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ìƒˆë¡œìš´ ë¹™ê³  ë³´ë“œ ë°ì´í„° ìƒì„± (ë¡œì»¬ gameState.bingoBoard)

Â  Â  Â  Â  Â  Â  gameState.bingoBoard = shuffledNumbers.map((num) => ({

Â  Â  Â  Â  Â  Â  Â  Â  number: num,

Â  Â  Â  Â  Â  Â  Â  Â  state: 'unflipped', // ì´ˆê¸° ìƒíƒœëŠ” 'unflipped'

Â  Â  Â  Â  Â  Â  Â  Â  mission: gameState.missionMap[num] || `ë¯¸ì…˜ ${num}` // missionMapì—ì„œ ë¯¸ì…˜ ê°€ì ¸ì˜¤ê¸°

Â  Â  Â  Â  Â  Â  }));

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ë¹™ê³ íŒ UI ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  bingoBoardElement.className = `bingo-board size-${size}`;

Â  Â  Â  Â  Â  Â  bingoBoardElement.innerHTML = gameState.bingoBoard.map((cell, index) =>

Â  Â  Â  Â  Â  Â  Â  Â  `<div class="bingo-cell" onclick="flipCell(${index})">${cell.number}</div>`

Â  Â  Â  Â  Â  Â  ).join('');



Â  Â  Â  Â  Â  Â  // ë¹™ê³ íŒ ìƒì„± í›„ ì…€ì˜ í´ë¦­ ê°€ëŠ¥ ì—¬ë¶€ ì¦‰ì‹œ ì—…ë°ì´íŠ¸

Â  Â  Â  Â  Â  Â  updateBingoCellClickability();

Â  Â  Â  Â  }



Â  Â  Â  Â  // ì…€ ë’¤ì§‘ê¸° (3ë‹¨ê³„ ìƒíƒœ ë³€ê²½: unflipped -> flipped -> failed -> unflipped)

Â  Â  Â  Â  async function flipCell(index) {

Â  Â  Â  Â  Â  Â  const roomSnapshot = await gameState.roomRef.once('value');

Â  Â  Â  Â  Â  Â  const roomData = roomSnapshot.val();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (roomData.gameEnded || roomData.winner) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ê²Œì„ì´ ì´ë¯¸ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ìŠ¹ìê°€ ê²°ì •ë˜ì—ˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const selectedNumber = gameState.bingoBoard[index].number;

Â  Â  Â  Â  Â  Â  const missionToAssign = gameState.bingoBoard[index].mission;

Â  Â  Â  Â  Â  Â  const currentPlayerName = gameState.playerList[gameState.currentTurn];

Â  Â  Â  Â  Â  Â  const isMyTurn = gameState.playerName === currentPlayerName;



Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  const isFlippedCommon = gameState.flippedNumbers.includes(selectedNumber);

Â  Â  Â  Â  Â  Â  Â  Â  const myCurrentState = roomData.players[gameState.playerName]?.boardState?.[selectedNumber]?.state || 'unflipped';



Â  Â  Â  Â  Â  Â  Â  Â  // 1ë‹¨ê³„: (ë‚´ í„´ì¼ ë•Œë§Œ) ê³µí†µìœ¼ë¡œ ë’¤ì§‘ì„ ìˆ«ìë¥¼ ì„ íƒ/ë“±ë¡

Â  Â  Â  Â  Â  Â  Â  Â  if (!isFlippedCommon) { // ì•„ì§ ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ìˆ«ìë¼ë©´

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isMyTurn) { // í˜„ì¬ ë‚´ í„´ì¼ ë•Œë§Œ ê³µí†µ ìˆ«ì ë’¤ì§‘ê¸° ê°€ëŠ¥

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState.hasMadeMoveInTurn) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('í•œ í„´ì— í•˜ë‚˜ì˜ ìˆ«ìë§Œ ë’¤ì§‘ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const flippedResult = await gameState.roomRef.child('flippedNumbers').child(selectedNumber).transaction((currentValue) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentValue === null) { // ì•„ì§ ë’¤ì§‘íˆì§€ ì•Šì•˜ë‹¤ë©´

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return true; // ë’¤ì§‘í˜ ìƒíƒœë¡œ ì„¤ì •

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return undefined; // ì´ë¯¸ ë’¤ì§‘í˜”ë‹¤ë©´ íŠ¸ëœì­ì…˜ ì·¨ì†Œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!flippedResult.committed) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì´ë¯¸ ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì´ ìˆ«ìë¥¼ ë’¤ì§‘ì—ˆê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.hasMadeMoveInTurn = true; // ì…€ì„ í´ë¦­í–ˆìŒì„ ê¸°ë¡

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // ë‚´ í„´ì´ ì•„ë‹ˆë©´ ê³µí†µ ìˆ«ìë¥¼ ë’¤ì§‘ì„ ìˆ˜ ì—†ìŒ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`${currentPlayerName}ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ìˆ«ìë¥¼ ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!`, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  // 2ë‹¨ê³„: ê°œë³„ í”Œë ˆì´ì–´ì˜ ë¹™ê³ íŒ ìƒíƒœë¥¼ ë³€ê²½ (ê³µí†µìœ¼ë¡œ ë’¤ì§‘íŒ ìˆ«ìë¼ë©´ ëˆ„êµ¬ë‚˜ ê°€ëŠ¥)

Â  Â  Â  Â  Â  Â  Â  Â  const myBoardStateRef = gameState.roomRef.child(`players/${gameState.playerName}/boardState/${selectedNumber}`);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Firebaseì˜ í˜„ì¬ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ìƒíƒœë¥¼ ê²°ì •

Â  Â  Â  Â  Â  Â  Â  Â  const boardStateResult = await myBoardStateRef.transaction((currentMyStateData) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let stateForMeInFirebase = currentMyStateData ? currentMyStateData.state : 'unflipped';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nextStateForMe;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µìœ¼ë¡œ ë’¤ì§‘íŒ ìˆ«ìë¼ë©´

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isFlippedCommon) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (stateForMeInFirebase === 'flipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextStateForMe = 'failed';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (stateForMeInFirebase === 'failed') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextStateForMe = 'flipped'; // failedì—ì„œ ë‹¤ì‹œ flippedë¡œ (í† ê¸€)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // unflipped ìƒíƒœì¸ë° ì´ë¯¸ ê³µí†µìœ¼ë¡œ ë’¤ì§‘í˜”ë‹¤ë©´ (ìë™ ë’¤ì§‘í˜)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextStateForMe = 'flipped';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ìˆ«ì (ë‚´ í„´ì— ë‚´ê°€ ì²˜ìŒ ë’¤ì§‘ëŠ” ê²½ìš° ë˜ëŠ” ì‹¤íŒ¨ë¥¼ ë˜ëŒë¦¬ëŠ” ê²½ìš°)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (stateForMeInFirebase === 'unflipped') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextStateForMe = 'flipped'; // ë‚´ê°€ ì²˜ìŒ ë’¤ì§‘ëŠ” ê²½ìš°

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (stateForMeInFirebase === 'failed') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextStateForMe = 'unflipped'; // ì˜ëª» í´ë¦­í•´ì„œ ì‹¤íŒ¨ ì²˜ë¦¬ëœ ê²ƒì„ ë˜ëŒë¦¼

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { // flipped ìƒíƒœì¸ë° ê³µí†µìœ¼ë¡œ ë’¤ì§‘íˆì§€ ì•Šì€ ê²½ìš° (ì˜¤ë¥˜ ë°©ì§€)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì´ ê²½ìš°ëŠ” ë°œìƒí•´ì„œëŠ” ì•ˆ ë¨.

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return undefined;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  state: nextStateForMe,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mission: missionToAssign, // ê³µí†µ ë¯¸ì…˜ ë§µì˜ ë¯¸ì…˜ ì‚¬ìš©

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  changedAt: firebase.database.ServerValue.TIMESTAMP

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  if (boardStateResult.committed) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ìì‹ ì˜ ë¹™ê³ íŒ ìƒíƒœ ì—…ë°ì´íŠ¸ ì„±ê³µ.

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // UIëŠ” setupRoomListenersì—ì„œ ì „ì²´ì ìœ¼ë¡œ ë™ê¸°í™”ë˜ë¯€ë¡œ ì—¬ê¸°ì„œ ê°œë³„ ì…€ ì—…ë°ì´íŠ¸ëŠ” í•„ìš” ì—†ìŒ.

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë‚´ ë¹™ê³ íŒ ì¹¸ ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!', 'error');

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ì…€ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');

Â  Â  Â  Â  Â  Â  Â  Â  console.error('Firebase Transaction Error:', error);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ê³µìœ  ë§í¬ ë³µì‚¬ (Clipboard API ì‚¬ìš©)

Â  Â  Â  Â  function copyShareLink() {

Â  Â  Â  Â  Â  Â  const shareLinkInput = document.getElementById('share-link');

Â  Â  Â  Â  Â  Â  if (navigator.clipboard && navigator.clipboard.writeText) {

Â  Â  Â  Â  Â  Â  Â  Â  navigator.clipboard.writeText(shareLinkInput.value)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹', 'success');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .catch(err => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shareLinkInput.select();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shareLinkInput.setSelectionRange(0, 99999);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! (êµ¬í˜• ë°©ì‹) ğŸ“‹', 'success');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (execErr) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prompt('ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•˜ì„¸ìš”:', shareLinkInput.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shareLinkInput.select();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shareLinkInput.setSelectionRange(0, 99999);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! (êµ¬í˜• ë°©ì‹) ğŸ“‹', 'success');

Â  Â  Â  Â  Â  Â  Â  Â  } catch (execErr) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  prompt('ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•˜ì„¸ìš”:', shareLinkInput.value);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // URL íŒŒë¼ë¯¸í„° í™•ì¸ ë° ìë™ ì…ì¥ ë¡œì§ ì‹œì‘ (HTML íŒŒì‹± ì§í›„ ì¦‰ì‹œ ì‹¤í–‰ ì‹œë„)

Â  Â  Â  Â  function checkURLParams() {

Â  Â  Â  Â  Â  Â  const urlParams = new URLSearchParams(window.location.search);

Â  Â  Â  Â  Â  Â  const roomCode = urlParams.get('room');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  if (roomCode) {

Â  Â  Â  Â  Â  Â  Â  Â  const upperRoomCode = roomCode.toUpperCase();

Â  Â  Â  Â  Â  Â  Â  Â  console.log('ğŸ¯ URLì—ì„œ ë°© ì½”ë“œ ë°œê²¬:', upperRoomCode);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ performAutoJoinì„ í˜¸ì¶œí•˜ë„ë¡ ì˜ˆì•½

Â  Â  Â  Â  Â  Â  Â  Â  // 0ms ì§€ì—°ìœ¼ë¡œ ê°€ëŠ¥í•œ í•œ ë¹¨ë¦¬ ì‹¤í–‰ (DOM ì¤€ë¹„ëŠ” performAutoJoin ë‚´ì—ì„œ ì¬ê·€ì ìœ¼ë¡œ í™•ì¸)

Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => performAutoJoin(upperRoomCode), 0);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  console.log('âŒ URLì— ë°© ì½”ë“œ ì—†ìŒ');

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // ìë™ ì…ì¥ ì‹¤í–‰ (ì´ˆëŒ€ ë§í¬ ì „ìš© UX ê°œì„ )

Â  Â  Â  Â  function performAutoJoin(roomCode) {

Â  Â  Â  Â  Â  Â  console.log('ğŸš€ ìë™ ì…ì¥ í”„ë¡œì„¸ìŠ¤ ì‹œì‘:', roomCode);

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  const joinSection = document.getElementById('join-room-section');

Â  Â  Â  Â  Â  Â  const roomCodeInput = document.getElementById('room-code');

Â  Â  Â  Â  Â  Â  const nameInput = document.getElementById('player-name');

Â  Â  Â  Â  Â  Â  const hintElement = document.getElementById('auto-join-hint');

Â  Â  Â  Â  Â  Â  const createRoomControls = document.querySelector('.create-room-controls'); // ë°© ë§Œë“¤ê¸° ì»¨íŠ¸ë¡¤ ê·¸ë£¹

Â  Â  Â  Â  Â  Â  const mainActionButtons = document.getElementById('main-action-buttons'); // 'ìƒˆ ë°© ë§Œë“¤ê¸°'ì™€ 'ë°© ì…ì¥í•˜ê¸°' ë²„íŠ¼ ê·¸ë£¹

Â  Â  Â  Â  Â  Â  const gameOptionsSection = document.getElementById('game-options-section'); // ê²Œì„ ì˜µì…˜ ì„¹ì…˜



Â  Â  Â  Â  Â  Â  // DOM ìš”ì†Œê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì¬ì‹œë„ (ì¬ê·€ í˜¸ì¶œ)

Â  Â  Â  Â  Â  Â  if (!joinSection || !roomCodeInput || !nameInput || !hintElement || !createRoomControls || !mainActionButtons || !gameOptionsSection) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error('âŒ í•„ìš”í•œ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ. ì¬ì‹œë„í•©ë‹ˆë‹¤.');

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => performAutoJoin(roomCode), 100);

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  console.log('âœ… DOM ìš”ì†Œ ëª¨ë‘ ì¤€ë¹„ë¨');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // 'ìƒˆ ë°© ë§Œë“¤ê¸°' ê´€ë ¨ UI ìˆ¨ê¸°ê¸°

Â  Â  Â  Â  Â  Â  createRoomControls.classList.add('hidden-by-url-param'); // ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ + ë°© ë§Œë“¤ê¸° ë²„íŠ¼ ê·¸ë£¹

Â  Â  Â  Â  Â  Â  mainActionButtons.classList.add('hidden-by-url-param'); // 'ìƒˆ ë°© ë§Œë“¤ê¸°', 'ë°© ì…ì¥í•˜ê¸°' ê·¸ë£¹ì„ ìˆ¨ê¹€



Â  Â  Â  Â  Â  Â  // "ë°© ì…ì¥" ì„¹ì…˜ë§Œ ë³´ì´ê²Œ í•˜ê¸°

Â  Â  Â  Â  Â  Â  joinSection.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  roomCodeInput.value = roomCode; // ë°© ì½”ë“œ ìë™ ì…ë ¥

Â  Â  Â  Â  Â  Â  roomCodeInput.readOnly = true; // ë°© ì½”ë“œ ìˆ˜ì • ë¶ˆê°€í•˜ë„ë¡ ì„¤ì • (ì´ˆëŒ€ ë§í¬ ì „ìš©)

Â  Â  Â  Â  Â  Â  nameInput.placeholder = 'ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê³  ì…ì¥í•˜ì„¸ìš”!';

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  hintElement.classList.remove('hidden');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ì´ˆëŒ€ ë§í¬ë¡œ ë“¤ì–´ì˜¨ ê²½ìš°, ê²Œì„ ì˜µì…˜ ì„¹ì…˜ ìˆ¨ê¹€ (ê²Œì„ ì‹œì‘ ì „ ì„¤ì • í™”ë©´)

Â  Â  Â  Â  Â  Â  gameOptionsSection.classList.add('hidden');



Â  Â  Â  Â  Â  Â  // autofocus ì—ëŸ¬ ë°©ì§€ë¥¼ ìœ„í•´ ìˆ˜ë™ í¬ì»¤ìŠ¤

Â  Â  Â  Â  Â  Â  if (document.activeElement !== nameInput) { // ì´ë¯¸ í¬ì»¤ìŠ¤ëœ ìš”ì†Œê°€ nameInputì´ ì•„ë‹ˆë¼ë©´

Â  Â  Â  Â  Â  Â  Â  Â  nameInput.focus();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  showMessage(`ğŸ‰ ì´ˆëŒ€ ë§í¬ë¡œ ì ‘ì†í–ˆìŠµë‹ˆë‹¤! ë°© ì½”ë“œ: ${roomCode}\në‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê³  ì…ì¥í•˜ì„¸ìš”!`, 'success');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ê¸°ì¡´ ìë™ ì…ì¥ í•¸ë“¤ëŸ¬ ì œê±° (ì¤‘ë³µ ë°©ì§€)

Â  Â  Â  Â  Â  Â  const currentAutoJoinHandler = nameInput._autoJoinHandler;

Â  Â  Â  Â  Â  Â  if (currentAutoJoinHandler) {

Â  Â  Â  Â  Â  Â  Â  Â  nameInput.removeEventListener('keypress', currentAutoJoinHandler);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // ìƒˆë¡œìš´ ìë™ ì…ì¥ í•¸ë“¤ëŸ¬ ë“±ë¡: ë‹‰ë„¤ì„ ì…ë ¥ í›„ ì—”í„° ì‹œ ì¦‰ì‹œ ë°© ì°¸ì—¬ ì‹œë„

Â  Â  Â  Â  Â  Â  const newAutoJoinHandler = function(e) {

Â  Â  Â  Â  Â  Â  Â  Â  if (e.key === 'Enter' && e.target.value.trim()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('âš¡ Enter í‚¤ë¡œ ìë™ ì…ì¥ ì‹œë„');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  joinRoom(roomCode); // roomCodeë¥¼ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ joinRoom í˜¸ì¶œ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ í•œ ë²ˆ ì‹¤í–‰ë˜ë©´ ë‹¤ì‹œ ë“±ë¡ë˜ì§€ ì•Šë„ë¡ ì œê±°

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nameInput.removeEventListener('keypress', newAutoJoinHandler);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nameInput._autoJoinHandler = null; // ì°¸ì¡° í•´ì œ

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  nameInput.addEventListener('keypress', newAutoJoinHandler);

Â  Â  Â  Â  Â  Â  nameInput._autoJoinHandler = newAutoJoinHandler; // í•¸ë“¤ëŸ¬ ì°¸ì¡° ì €ì¥

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  console.log('âœ… ìë™ ì…ì¥ UI ì„¤ì • ì™„ë£Œ');

Â  Â  Â  Â  }



Â  Â  Â  Â  // --- ì¼ë°˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (DOMContentLoaded ë‚´ì—ì„œ í˜¸ì¶œ) ---

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  // ë¯¸ì…˜ ì…ë ¥ í•„ë“œ ì—”í„° í‚¤ë¡œ ë¯¸ì…˜ ì¶”ê°€

Â  Â  Â  Â  Â  Â  document.getElementById('mission-input').addEventListener('keypress', function(e) {

Â  Â  Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMission();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  // ë°© ì½”ë“œ ì…ë ¥ ëŒ€ë¬¸ì ë³€í™˜

Â  Â  Â  Â  Â  Â  document.getElementById('room-code').addEventListener('input', function(e) {

Â  Â  Â  Â  Â  Â  Â  Â  e.target.value = e.target.value.toUpperCase();

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  // ë¹™ê³ íŒ í¬ê¸° ì„ íƒ ì‹œ ë¯¸ì…˜ ìµœì†Œ ê°œìˆ˜ íŒíŠ¸ ì—…ë°ì´íŠ¸ (3x3 ê³ ì •ìœ¼ë¡œ UIìƒìœ¼ë¡œëŠ” ì˜í–¥ ì—†ìŒ)

Â  Â  Â  Â  Â  Â  document.querySelectorAll('input[name="board-size"]').forEach(radio => {

Â  Â  Â  Â  Â  Â  Â  Â  radio.addEventListener('change', () => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newSize = parseInt(radio.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState.boardSize = newSize; // ì´ ê°’ì€ ê³„ì† 3ì´ ë  ê²ƒ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMissionsDisplay();

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë¯¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸°

Â  Â  Â  Â  Â  Â  loadMissions();

Â  Â  Â  Â  });



Â  Â  Â  Â  // í˜ì´ì§€ ì´íƒˆ ì‹œ Firebase ë¦¬ìŠ¤ë„ˆ ì •ë¦¬ ë° í”Œë ˆì´ì–´ ì •ë³´ ì‚­ì œ

Â  Â  Â  Â  window.addEventListener('beforeunload', async function() {

Â  Â  Â  Â  Â  Â  if (gameState.roomRef && gameState.playerName) {

Â  Â  Â  Â  Â  Â  Â  Â  gameState.roomRef.off(); // ë°©ì„ ë– ë‚  ë•Œ Firebase ë¦¬ìŠ¤ë„ˆ í•´ì œ

Â  Â  Â  Â  Â  Â  Â  Â  // ìì‹ ì˜ í”Œë ˆì´ì–´ ì •ë³´ë§Œ ì‚­ì œ

Â  Â  Â  Â  Â  Â  Â  Â  await gameState.roomRef.child('players').child(gameState.playerName).remove();

Â  Â  Â  Â  Â  Â  Â  Â  console.log(`í”Œë ˆì´ì–´ ${gameState.playerName}ì´(ê°€) ë°©ì„ ë‚˜ê°‘ë‹ˆë‹¤.`);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  });



Â  Â  Â  Â  // URL íŒŒë¼ë¯¸í„° í™•ì¸ ë° ìë™ ì…ì¥ ë¡œì§ ì‹œì‘ (HTML íŒŒì‹± ì§í›„ ì¦‰ì‹œ ì‹¤í–‰ ì‹œë„)

Â  Â  Â  Â  checkURLParams();

Â  Â  </script>

</body>

</html>
